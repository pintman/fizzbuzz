<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de">
<head>
<title>FizzBuzz Katas</title>
<!-- 2017-09-28 Do 09:41 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Marco Bakera" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" href="styles/org.css" type="text/css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">FizzBuzz Katas</h1>
<div id="table-of-contents">
<h2>Inhaltsverzeichnis</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Auf Papier</a></li>
<li><a href="#sec-2">2. Mit einer Methode</a></li>
<li><a href="#sec-3">3. Ohne Verwendung einer Schleife (rekursiv)</a></li>
<li><a href="#sec-4">4. Mit Hilfe von nebenläufigen Threads und Prozessen</a></li>
<li><a href="#sec-5">5. Mit einer anderen IDE</a></li>
<li><a href="#sec-6">6. In einer anderen Programmiersprache</a></li>
<li><a href="#sec-7">7. Als Client-Server Anwendung</a></li>
<li><a href="#sec-8">8. Mit einer grafischen Oberfläche (GUI)</a></li>
<li><a href="#sec-9">9. Objekt-Orientiert: Klassen und Objekte verwenden</a></li>
<li><a href="#sec-10">10. Objekt-Orientiert mit Vererbung</a></li>
<li><a href="#sec-11">11. Funktional mit map, reduce und lambda-Ausdrücken</a></li>
<li><a href="#sec-12">12. Als Webanwendung</a></li>
<li><a href="#sec-13">13. In git-repo einchecken</a></li>
<li><a href="#sec-14">14. Als installierbares Programm</a></li>
<li><a href="#sec-15">15. Als getestetes Programm (mit unittest und doctests)</a></li>
<li><a href="#sec-16">16. Mit einem EA-Modul ansteuern</a></li>
<li><a href="#sec-17">17. Mit Anbindung an eine Datenbank</a></li>
<li><a href="#sec-18">18. Mit docstring Dokumentation</a></li>
<li><a href="#sec-19">19. Als Chatbot</a></li>
<li><a href="#sec-20">20. Auf einem Cluster (mit GNU parallel)</a></li>
<li><a href="#sec-21">21. In einem UML-Aktivitätsdiagramm</a></li>
<li><a href="#sec-22">22. In einem UML-Sequenzdiagramm</a></li>
<li><a href="#sec-23">23. In einem UML-Klassendiagramm</a></li>
<li><a href="#sec-24">24. Als IOT-Anwendung mit einem Message-Broker (MQTT)</a></li>
<li><a href="#sec-25">25. Mit Kommandozeilenparametern</a></li>
<li><a href="#sec-26">26. Mit einer Konfigurationsdatei</a></li>
<li><a href="#sec-27">27. Als Web-Service mit REST-API</a></li>
<li><a href="#sec-28">28. In einer MVC-Architektur</a></li>
<li><a href="#sec-29">29. Als Spiel (mit pygame)</a></li>
<li><a href="#sec-30">30. In einem docker Container</a></li>
<li><a href="#sec-31">31. Mit Fehlerbehandlung</a></li>
<li><a href="#sec-32">32. Mit einem neuronalen Netzwerk</a></li>
<li><a href="#sec-33">33. Mit logging in ein logfile</a></li>
<li><a href="#sec-34">34. Mit einem Profiler</a></li>
<li><a href="#sec-35">35. Mit einer geplotteten Visualisierung</a></li>
</ul>
</div>
</div>
<p>
FizzBuzz ist ein Zählspiel, bei dem die Zahlen bis 100 aufgezählt
werden. Ist die Zahl durch 3 teilbar, wird "fizz" gesagt. Ist sie
durch 5 teilbar, wird "buzz" gesagt. Ist sie durch 3 und 5 teilbar,
wird "fizzbuzz" gesagt. Ansonsten wird die Zahl selbst gesagt.
</p>

<p>
Wir versuchen uns auf dem Blatt mit einer Aufwärmübung (Kata). Die
anschließenden Übungen lösen alle dasselbe fizzbuzz-Problem, nutzen
jedoch ganz unterschiedliche Herangehensweisen oder Technologien.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Auf Papier</h2>
<div class="outline-text-2" id="text-1">
<pre class="example">
1
2
fizz
4
buzz
fizz
7
8
fizz
buzz
11
fizz
13
14
fizzbuzz
16
17
fizz
19
</pre>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Mit einer Methode</h2>
<div class="outline-text-2" id="text-2">
<p>
Hier ist eine erste einfache Variante.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_method</span>(n):
<span class="linenr"> 2: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(n):
<span class="linenr"> 3: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr"> 4: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr"> 5: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr"> 6: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizz"</span>)
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr"> 8: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"buzz"</span>)
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">10: </span>            <span style="color: #a020f0;">print</span>(i)
<span class="linenr">11: </span>
<span class="linenr">12: </span>fizzbuzz_method(20)
</pre>
</div>

<pre class="example">
fizzbuzz
1
2
fizz
4
buzz
fizz
7
8
fizz
buzz
11
fizz
13
14
fizzbuzz
16
17
fizz
19
</pre>

<p>
Das nächste Beispiel wandelt die obige Variante ab, erzeugt aber
dieselbe Ausgabe.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_method</span>(n):
<span class="linenr"> 2: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(n):
<span class="linenr"> 3: </span>        <span style="color: #a0522d;">s</span> = <span style="color: #8b2252;">""</span>
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0:
<span class="linenr"> 6: </span>            <span style="color: #a0522d;">s</span> = <span style="color: #8b2252;">"fizz"</span>
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">if</span> i % 5 == 0:
<span class="linenr"> 8: </span>            <span style="color: #a0522d;">s</span> += <span style="color: #8b2252;">"buzz"</span>
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">if</span> <span style="color: #483d8b;">len</span>(s) == 0:
<span class="linenr">10: </span>            <span style="color: #a0522d;">s</span> = i
<span class="linenr">11: </span>
<span class="linenr">12: </span>        <span style="color: #a020f0;">print</span>(s)
<span class="linenr">13: </span>
<span class="linenr">14: </span>fizzbuzz_method(20)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Ohne Verwendung einer Schleife (rekursiv)</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_recursive</span>(i):
<span class="linenr"> 2: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">if</span> i == 0:
<span class="linenr"> 3: </span>        <span style="color: #a020f0;">return</span>
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">else</span>:
<span class="linenr"> 5: </span>        fizzbuzz_recursive(i-1)
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr"> 8: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr">10: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizz"</span>)
<span class="linenr">11: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">12: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">13: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">14: </span>            <span style="color: #a020f0;">print</span>(i)
<span class="linenr">15: </span>
<span class="linenr">16: </span>
<span class="linenr">17: </span>fizzbuzz_recursive(20)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Mit Hilfe von nebenläufigen Threads und Prozessen</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> threading
<span class="linenr"> 2: </span><span style="color: #a020f0;">import</span> time
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_thread</span>(i):    
<span class="linenr"> 5: </span><span style="background-color: #f2f2f2;"> </span>   time.sleep(1)
<span class="linenr"> 6: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">print</span>(i, <span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr"> 8: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">print</span>(i, <span style="color: #8b2252;">"fizz"</span>)
<span class="linenr">10: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">11: </span>        <span style="color: #a020f0;">print</span>(i, <span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">12: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">else</span>:
<span class="linenr">13: </span>        <span style="color: #a020f0;">print</span>(i)
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_start_threads</span>():
<span class="linenr">16: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(20):
<span class="linenr">17: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">Creating a thread object that will execute the method above</span>
<span class="linenr">18: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">with the given argument i.</span>
<span class="linenr">19: </span>        <span style="color: #a0522d;">th</span> = threading.Thread(target=fizzbuzz_thread, args=(i,))
<span class="linenr">20: </span>        th.start()
<span class="linenr">21: </span>
<span class="linenr">22: </span>fizzbuzz_start_threads()
</pre>
</div>

<pre class="example">
3 fizz
4
2
1
0 fizzbuzz
5 buzz
7
6 fizz
10 buzz
8
11
9 fizz
14
15 fizzbuzz
16
17
13
18 fizz
12 fizz
19
</pre>

<p>
Die Ausgabe kann bei jedem Start in einer anderen Reihenfolge
erfolgen, da die Methodenaufrufe fast gleichzeitig erfolgen. Obwohl
die Methode <code>fizzbuzz_thread()</code> zu Beginn wartet, ist das Programm
schnell beendet, da die Threads nicht sequentiell ablaufen, sondern
gleichzeitig.
</p>

<p>
In einer zweiten Variante verwenden wir echte Prozesse des
Betriebssystems, die auch auf verschiedene Kerne oder Prozessoren
aufgeteilt werden können. Hierfür gibt es das Paket <a href="https://docs.python.org/3/library/multiprocessing.html">multiprocessing</a>.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> time
<span class="linenr"> 2: </span><span style="color: #a020f0;">import</span> multiprocessing
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_process</span>(i):
<span class="linenr"> 5: </span><span style="background-color: #f2f2f2;"> </span>   time.sleep(1)
<span class="linenr"> 6: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">print</span>(i, <span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr"> 8: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">print</span>(i, <span style="color: #8b2252;">"fizz"</span>)
<span class="linenr">10: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">11: </span>        <span style="color: #a020f0;">print</span>(i, <span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">12: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">else</span>:
<span class="linenr">13: </span>        <span style="color: #a020f0;">print</span>(i)
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_start_processes</span>():
<span class="linenr">16: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(20):
<span class="linenr">17: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">Creating a process that will execute the method above</span>
<span class="linenr">18: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">with the given argument i.</span>
<span class="linenr">19: </span>        <span style="color: #a0522d;">pr</span> = multiprocessing.Process(target=fizzbuzz_process, args=(i,))
<span class="linenr">20: </span>        pr.start()
<span class="linenr">21: </span>
<span class="linenr">22: </span>fizzbuzz_start_processes()
</pre>
</div>

<pre class="example">
0 fizzbuzz
1
2
3 fizz
4
5 buzz
6 fizz
7
9 fizz
8
10 buzz
11
12 fizz
13
15 fizzbuzz
14
16
17
18 fizz
19
</pre>

<p>
Auch hier ist die Ausgabereihenfolge nicht-deterministisch. Zudem
sieht man nun in einem Task-Manager, dass viele verschiedene Prozesse
kurz gestartet werden.
</p>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Mit einer anderen IDE</h2>
<div class="outline-text-2" id="text-5">
<p>
Mögliche Kandidaten wären:
</p>

<ul class="org-ul">
<li>IDLE
</li>
<li>PyCharm
</li>
<li>Emacs
</li>
<li>vim
</li>
<li>Atom
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> In einer anderen Programmiersprache</h2>
<div class="outline-text-2" id="text-6">
<p>
Mögliche Sprachen wären:
</p>

<ul class="org-ul">
<li>Java
</li>
<li>Javascript
</li>
<li>C#
</li>
<li>C
</li>
<li>C++
</li>
<li>Bash
</li>
<li>Smalltalk
</li>
<li>Clojure
</li>
<li>eine Esoterische Programmiersprache (der Vortrag <a href="https://media.ccc.de/v/gpn17-8545-esoterische_programmiersprachen">Esoterische
Programmiersprachen</a> stellt ein paar Vertreter vor)
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Als Client-Server Anwendung</h2>
<div class="outline-text-2" id="text-7">
<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> socketserver
<span class="linenr"> 2: </span><span style="color: #a020f0;">import</span> socket
<span class="linenr"> 3: </span><span style="color: #a020f0;">import</span> threading
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzzHandler</span>(socketserver.BaseRequestHandler):
<span class="linenr"> 6: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">handle</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr"> 7: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">received bytes from request and take the first one</span>
<span class="linenr"> 8: </span>        <span style="color: #a0522d;">i</span> = <span style="color: #a020f0;">self</span>.request.recv(1)[0]        
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr">10: </span>            <span style="color: #a0522d;">answer</span> = <span style="color: #8b2252;">"fizzbuzz"</span>
<span class="linenr">11: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr">12: </span>            <span style="color: #a0522d;">answer</span> = <span style="color: #8b2252;">"fizz"</span>
<span class="linenr">13: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">14: </span>            <span style="color: #a0522d;">answer</span> = <span style="color: #8b2252;">"buzz"</span>
<span class="linenr">15: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">16: </span>            <span style="color: #a0522d;">answer</span> = i
<span class="linenr">17: </span>
<span class="linenr">18: </span>        <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"[server] received:"</span>, i, <span style="color: #8b2252;">"answer:"</span>, answer)
<span class="linenr">19: </span>
<span class="linenr">20: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzzClient</span>:
<span class="linenr">21: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, ip, port):
<span class="linenr">22: </span>        <span style="color: #a020f0;">self</span>.socket = (ip, port)
<span class="linenr">23: </span>
<span class="linenr">24: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">send</span>(<span style="color: #a020f0;">self</span>, i):
<span class="linenr">25: </span>        <span style="color: #a020f0;">with</span> socket.socket(socket.AF_INET, socket.SOCK_STREAM) <span style="color: #a020f0;">as</span> sock:
<span class="linenr">26: </span>            sock.connect(<span style="color: #a020f0;">self</span>.socket)
<span class="linenr">27: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"[client] sending"</span>, i)
<span class="linenr">28: </span>            sock.sendall(<span style="color: #483d8b;">bytes</span>([i]))
<span class="linenr">29: </span>
<span class="linenr">30: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_client_server</span>():
<span class="linenr">31: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">Starting the server in a separate thread</span>
<span class="linenr">32: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">server_socket</span> = (<span style="color: #8b2252;">"127.0.0.1"</span>, 8081)
<span class="linenr">33: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">server</span> = socketserver.TCPServer(server_socket, FizzBuzzHandler)
<span class="linenr">34: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">th</span> = threading.Thread(target=server.serve_forever, daemon=<span style="color: #008b8b;">True</span>)
<span class="linenr">35: </span><span style="background-color: #f2f2f2;"> </span>   th.start()
<span class="linenr">36: </span>
<span class="linenr">37: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">starting the client</span>
<span class="linenr">38: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">cl</span> = FizzBuzzClient(*server_socket)
<span class="linenr">39: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(20):
<span class="linenr">40: </span>        cl.send(i)
<span class="linenr">41: </span>
<span class="linenr">42: </span>fizzbuzz_client_server()
</pre>
</div>

<pre class="example">
[client] sending 0
[server] received: 0 answer: fizzbuzz
[client] sending 1
[server] received: 1 answer: 1
[client] sending 2
[server] received: 2 answer: 2
[client] sending 3
[server] received: 3 answer: fizz
[client] sending 4
[server] received: 4 answer: 4
[client] sending 5
[server] received: 5 answer: buzz
[client] sending 6
[server] received: 6 answer: fizz
[client] sending 7
[server] received: 7 answer: 7
[client] sending 8
[server] received: 8 answer: 8
[client] sending 9
[server] received: 9 answer: fizz
[client] sending 10
[server] received: 10 answer: buzz
[client] sending 11
[server] received: 11 answer: 11
[client] sending 12
[server] received: 12 answer: fizz
[client] sending 13
[server] received: 13 answer: 13
[client] sending 14
[server] received: 14 answer: 14
[client] sending 15
[server] received: 15 answer: fizzbuzz
[client] sending 16
[server] received: 16 answer: 16
[client] sending 17
[server] received: 17 answer: 17
[client] sending 18
[server] received: 18 answer: fizz
[client] sending 19
[server] received: 19 answer: 19
</pre>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> Mit einer grafischen Oberfläche (GUI)</h2>
<div class="outline-text-2" id="text-8">
<p>
Mit Python wird das einfache Paket <code>tkinter</code> für die Gestaltung von
GUIs mitgeliefert. Eine ausführliche Dokumentation ist unter
<a href="http://effbot.org/tkinterbook/">http://effbot.org/tkinterbook/</a> zu finden.
</p>


<div class="figure">
<p><img src="doc/fizzbuzz_gui.png" alt="fizzbuzz_gui.png" />
</p>
</div>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> tkinter
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">GUI</span>:
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr"> 5: </span>        <span style="color: #a020f0;">self</span>.i = 0
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>        <span style="color: #a0522d;">root</span> = tkinter.Tk()
<span class="linenr"> 8: </span>        root.title(<span style="color: #8b2252;">"FizzBuzz"</span>)
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">add menu</span>
<span class="linenr">11: </span>        <span style="color: #a0522d;">menubar</span> = tkinter.Menu(root)
<span class="linenr">12: </span>        root.config(menu=menubar)
<span class="linenr">13: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">adding Tools-menu to menubar</span>
<span class="linenr">14: </span>        <span style="color: #a0522d;">tools_menu</span> = tkinter.Menu(menubar)
<span class="linenr">15: </span>        menubar.add_cascade(label=<span style="color: #8b2252;">"Tools"</span>, menu=tools_menu)
<span class="linenr">16: </span>        tools_menu.add_command(label=<span style="color: #8b2252;">"Next"</span>, command=<span style="color: #a020f0;">self</span>.click)
<span class="linenr">17: </span>
<span class="linenr">18: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">add button</span>
<span class="linenr">19: </span>        <span style="color: #a0522d;">btn</span> = tkinter.Button(root, text=<span style="color: #8b2252;">"next"</span>, command=<span style="color: #a020f0;">self</span>.click)
<span class="linenr">20: </span>        btn.pack()
<span class="linenr">21: </span>
<span class="linenr">22: </span>        <span style="color: #a020f0;">self</span>.lbl = tkinter.Label(root, text=<span style="color: #8b2252;">"fizzbuzz GUI"</span>)
<span class="linenr">23: </span>        <span style="color: #a020f0;">self</span>.lbl.pack()
<span class="linenr">24: </span>        <span style="color: #a020f0;">self</span>.ent = tkinter.Entry(root)
<span class="linenr">25: </span>        <span style="color: #a020f0;">self</span>.ent.pack()
<span class="linenr">26: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">entering main event loop</span>
<span class="linenr">27: </span>        root.mainloop()
<span class="linenr">28: </span>
<span class="linenr">29: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">click</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">30: </span>        <span style="color: #a0522d;">i</span> = <span style="color: #a020f0;">self</span>.i
<span class="linenr">31: </span>
<span class="linenr">32: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">update label</span>
<span class="linenr">33: </span>        <span style="color: #a020f0;">self</span>.lbl.configure(text=<span style="color: #8b2252;">"fizzbuzz von "</span> + <span style="color: #483d8b;">str</span>(i))
<span class="linenr">34: </span>
<span class="linenr">35: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">clear the entry field</span>
<span class="linenr">36: </span>        <span style="color: #a020f0;">self</span>.ent.delete(0, tkinter.END)
<span class="linenr">37: </span>
<span class="linenr">38: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr">39: </span>            <span style="color: #a020f0;">self</span>.ent.insert(0, <span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr">40: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr">41: </span>            <span style="color: #a020f0;">self</span>.ent.insert(0, <span style="color: #8b2252;">"fizz"</span>)
<span class="linenr">42: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">43: </span>            <span style="color: #a020f0;">self</span>.ent.insert(0, <span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">44: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">45: </span>            <span style="color: #a020f0;">self</span>.ent.insert(0, i)
<span class="linenr">46: </span>
<span class="linenr">47: </span>        <span style="color: #a020f0;">self</span>.i += 1
<span class="linenr">48: </span>
<span class="linenr">49: </span>GUI()
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> Objekt-Orientiert: Klassen und Objekte verwenden</h2>
<div class="outline-text-2" id="text-9">
<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzzerOutput</span>:
<span class="linenr"> 2: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, n):
<span class="linenr"> 3: </span>        <span style="color: #a020f0;">self</span>.n = n
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #a020f0;">print</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr"> 6: </span>        <span style="color: #a0522d;">i</span> = <span style="color: #a020f0;">self</span>.n
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr"> 9: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr">10: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr">11: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizz"</span>)
<span class="linenr">12: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">13: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">14: </span>
<span class="linenr">15: </span>
<span class="linenr">16: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">NumberOutput</span>:
<span class="linenr">17: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, n):
<span class="linenr">18: </span>        <span style="color: #a020f0;">self</span>.n = n
<span class="linenr">19: </span>
<span class="linenr">20: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #a020f0;">print</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">21: </span>        <span style="color: #a020f0;">print</span>(<span style="color: #a020f0;">self</span>.n)
<span class="linenr">22: </span>
<span class="linenr">23: </span>
<span class="linenr">24: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzzGame</span>:
<span class="linenr">25: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, i):
<span class="linenr">26: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">or</span> i % 5 == 0:
<span class="linenr">27: </span>            <span style="color: #a020f0;">self</span>.printer = FizzBuzzerOutput(i)
<span class="linenr">28: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">29: </span>            <span style="color: #a020f0;">self</span>.printer = NumberOutput(i)
<span class="linenr">30: </span>
<span class="linenr">31: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #a020f0;">print</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">32: </span>        <span style="color: #a020f0;">self</span>.printer.<span style="color: #a020f0;">print</span>()
<span class="linenr">33: </span>
<span class="linenr">34: </span>
<span class="linenr">35: </span><span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(20):
<span class="linenr">36: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">f</span> = FizzBuzzGame(i)
<span class="linenr">37: </span><span style="background-color: #f2f2f2;"> </span>   f.<span style="color: #a020f0;">print</span>()
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> Objekt-Orientiert mit Vererbung</h2>
<div class="outline-text-2" id="text-10">
<p>
Wir verwenden zwei Klassen <code>Game</code> und <code>FizzBuzzGame</code>, wobei letztere
die erstere erweitert und damit alle Attribute und Methoden von dieser
übernimmt und ggf. um weitere ergänzt. Man kann sagen <code>FizzbuzzGame</code>
ist ein <code>Game</code>. Durch die Vererbung muss nicht jedes neue Spiel die
Gameloop erneut programmieren, sondern kann diese generische
Funktionalität übernehmen.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">Game</span>:
<span class="linenr"> 2: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">start_game_loop</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr"> 3: </span>        <span style="color: #8b2252;">"""Starting the gameloop of the game."""</span>
<span class="linenr"> 4: </span>        <span style="color: #a020f0;">self</span>.setup()
<span class="linenr"> 5: </span>        <span style="color: #a020f0;">while</span> <span style="color: #008b8b;">True</span>:
<span class="linenr"> 6: </span>            <span style="color: #a020f0;">self</span>.handle_input()
<span class="linenr"> 7: </span>            <span style="color: #a020f0;">self</span>.update()
<span class="linenr"> 8: </span>            <span style="color: #a020f0;">self</span>.draw()
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">setup</span>():
<span class="linenr">11: </span>        <span style="color: #8b2252;">"""Will be invoked once at the beginning of a game."""</span>
<span class="linenr">12: </span>        <span style="color: #a020f0;">pass</span>
<span class="linenr">13: </span>
<span class="linenr">14: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">handle_input</span>():
<span class="linenr">15: </span>        <span style="color: #8b2252;">"""Evaluate inputs of the player."""</span>
<span class="linenr">16: </span>        <span style="color: #a020f0;">pass</span>
<span class="linenr">17: </span>
<span class="linenr">18: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">update</span>():
<span class="linenr">19: </span>        <span style="color: #8b2252;">"""Updating all game objects and game values."""</span>
<span class="linenr">20: </span>        <span style="color: #a020f0;">pass</span>
<span class="linenr">21: </span>
<span class="linenr">22: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">draw</span>():
<span class="linenr">23: </span>        <span style="color: #8b2252;">"""Draw the game world."""</span>
<span class="linenr">24: </span>        <span style="color: #a020f0;">pass</span>
<span class="linenr">25: </span>
<span class="linenr">26: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzzGame</span>(Game): <span style="color: #b22222;"># </span><span style="color: #b22222;">Subclass(Superclass)</span>
<span class="linenr">27: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">28: </span>        <span style="color: #a020f0;">self</span>.n = 1
<span class="linenr">29: </span>        <span style="color: #a020f0;">self</span>.answer_correct = <span style="color: #008b8b;">False</span>
<span class="linenr">30: </span>        <span style="color: #a020f0;">self</span>.playerinput = <span style="color: #8b2252;">""</span>
<span class="linenr">31: </span>
<span class="linenr">32: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">setup</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">33: </span>        <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"Spiel gestartet"</span>)
<span class="linenr">34: </span>
<span class="linenr">35: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">handle_input</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">36: </span>        <span style="color: #a020f0;">self</span>.playerinput = <span style="color: #483d8b;">input</span>(<span style="color: #483d8b;">str</span>(<span style="color: #a020f0;">self</span>.n) + <span style="color: #8b2252;">" ? "</span>)
<span class="linenr">37: </span>
<span class="linenr">38: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">update</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">39: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">Evaluating player input</span>
<span class="linenr">40: </span>        <span style="color: #a0522d;">soll</span> = <span style="color: #a020f0;">self</span>._fizzbuzz(<span style="color: #a020f0;">self</span>.n)
<span class="linenr">41: </span>        <span style="color: #a020f0;">self</span>.answer_correct = <span style="color: #a020f0;">self</span>.playerinput == <span style="color: #483d8b;">str</span>(soll)        
<span class="linenr">42: </span>        <span style="color: #a020f0;">if</span> <span style="color: #a020f0;">self</span>.answer_correct:
<span class="linenr">43: </span>            <span style="color: #a020f0;">self</span>.n += 1
<span class="linenr">44: </span>
<span class="linenr">45: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">Checking winning condition</span>
<span class="linenr">46: </span>        <span style="color: #a020f0;">if</span> <span style="color: #a020f0;">self</span>.n == 6:
<span class="linenr">47: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"Gewonnen!"</span>)
<span class="linenr">48: </span>            <span style="color: #008b8b;">exit</span>()
<span class="linenr">49: </span>
<span class="linenr">50: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">draw</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">51: </span>        <span style="color: #a020f0;">if</span> <span style="color: #a020f0;">self</span>.answer_correct:
<span class="linenr">52: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"Richtig :)"</span>)
<span class="linenr">53: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">54: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"Leider Falsch. Probiere es erneut."</span>)
<span class="linenr">55: </span>
<span class="linenr">56: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">_fizzbuzz</span>(<span style="color: #a020f0;">self</span>, i):
<span class="linenr">57: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr">58: </span>            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizzbuzz"</span>
<span class="linenr">59: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr">60: </span>            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizz"</span>
<span class="linenr">61: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">62: </span>            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"buzz"</span>
<span class="linenr">63: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">64: </span>            <span style="color: #a020f0;">return</span> i
<span class="linenr">65: </span>
<span class="linenr">66: </span>
<span class="linenr">67: </span><span style="color: #a0522d;">fbs</span> = FizzBuzzGame()
<span class="linenr">68: </span>fbs.start_game_loop()
</pre>
</div>

<p>
Wir simulieren ein Spiel, indem wir testweise die Eingaben 1, 2 und
"fizz" an das Spiel senden (Spielereingaben tauchen daher nicht in der
Ausgabe auf).
</p>

<div class="org-src-container">

<pre class="src src-sh">/bin/echo -e <span style="color: #8b2252;">"1\n2\nfizz\n4\nbuzz\n"</span> | python3 fizzbuzz_vererbung.py
</pre>
</div>

<pre class="example">
Spiel gestartet
1 ? Richtig :)
2 ? Richtig :)
3 ? Richtig :)
4 ? Richtig :)
5 ? Gewonnen!
</pre>
</div>
</div>

<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> Funktional mit map, reduce und lambda-Ausdrücken</h2>
<div class="outline-text-2" id="text-11">
<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> functools
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">by</span>(number):
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #8b2252;">"""Return a function to prove divisibility by number."""</span>
<span class="linenr"> 5: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">return</span> (<span style="color: #a020f0;">lambda</span> i: i % number == 0)
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_func</span>(i):
<span class="linenr"> 8: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">create two functions to test for divisibility</span>
<span class="linenr"> 9: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">by5</span> = by(5)
<span class="linenr">10: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">by3</span> = by(3)
<span class="linenr">11: </span>
<span class="linenr">12: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">if</span> by5(i) <span style="color: #a020f0;">and</span> by3(i):
<span class="linenr">13: </span>        <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizzbuzz"</span>
<span class="linenr">14: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">elif</span> by3(i):
<span class="linenr">15: </span>        <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizz"</span>
<span class="linenr">16: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">elif</span> by5(i):
<span class="linenr">17: </span>        <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"buzz"</span>
<span class="linenr">18: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">else</span>:
<span class="linenr">19: </span>        <span style="color: #a020f0;">return</span> i
<span class="linenr">20: </span>
<span class="linenr">21: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_functional</span>():
<span class="linenr">22: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">apply fizzbuzz_func to numbers</span>
<span class="linenr">23: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">res</span> = <span style="color: #483d8b;">map</span>(fizzbuzz_func, <span style="color: #483d8b;">range</span>(20))
<span class="linenr">24: </span>
<span class="linenr">25: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">reduce the result into a string</span>
<span class="linenr">26: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">s</span> = functools.<span style="color: #483d8b;">reduce</span>(
<span class="linenr">27: </span>        <span style="color: #a020f0;">lambda</span> acc, i: acc + <span style="color: #483d8b;">str</span>(i) + <span style="color: #8b2252;">"\n"</span>, <span style="color: #b22222;"># </span><span style="color: #b22222;">updating function</span>
<span class="linenr">28: </span>        res, <span style="color: #b22222;"># </span><span style="color: #b22222;">values to be reduced</span>
<span class="linenr">29: </span>        <span style="color: #8b2252;">""</span>) <span style="color: #b22222;"># </span><span style="color: #b22222;">initial value</span>
<span class="linenr">30: </span>
<span class="linenr">31: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">print</span>(s)
<span class="linenr">32: </span>
<span class="linenr">33: </span>fizzbuzz_functional()
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> Als Webanwendung</h2>
<div class="outline-text-2" id="text-12">
<p>
Bottle (<a href="https://bottlepy.org">https://bottlepy.org</a>) ist ein Webframework, das leicht mit
<code>pip</code> installiert werden kann.
</p>

<div class="org-src-container">

<pre class="src src-sh">pip install bottle
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> bottle
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #228b22;">@bottle.route</span>(<span style="color: #8b2252;">"/fizzbuzz/&lt;number:int&gt;"</span>)
<span class="linenr"> 4: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_web_route</span>(number):    
<span class="linenr"> 5: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">results</span> = []
<span class="linenr"> 6: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(number):
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr"> 8: </span>            results.append(<span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr">10: </span>            results.append(<span style="color: #8b2252;">"fizz"</span>)
<span class="linenr">11: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">12: </span>            results.append(<span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">13: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">14: </span>            results.append(i)
<span class="linenr">15: </span>
<span class="linenr">16: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">html</span> = <span style="color: #8b2252;">"""</span>
<span class="linenr">17: </span><span style="color: #8b2252;">        &lt;!DOCTYPE html&gt;</span>
<span class="linenr">18: </span><span style="color: #8b2252;">        &lt;html&gt;</span>
<span class="linenr">19: </span><span style="color: #8b2252;">          &lt;body&gt;</span>
<span class="linenr">20: </span><span style="color: #8b2252;">            &lt;h1&gt;FizzBuzz Numbers up to {{max}}&lt;/h1&gt;</span>
<span class="linenr">21: </span><span style="color: #8b2252;">            &lt;table&gt;</span>
<span class="linenr">22: </span><span style="color: #8b2252;">            % for r in results:</span>
<span class="linenr">23: </span><span style="color: #8b2252;">              &lt;tr&gt;&lt;td&gt; {{r}} &lt;/td&gt;&lt;/tr&gt;</span>
<span class="linenr">24: </span><span style="color: #8b2252;">            %end</span>
<span class="linenr">25: </span><span style="color: #8b2252;">            &lt;/table&gt;</span>
<span class="linenr">26: </span><span style="color: #8b2252;">          &lt;/body&gt;</span>
<span class="linenr">27: </span><span style="color: #8b2252;">        &lt;/html&gt;</span>
<span class="linenr">28: </span><span style="color: #8b2252;">        """</span>
<span class="linenr">29: </span>
<span class="linenr">30: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">return</span> bottle.template(html, <span style="color: #483d8b;">max</span>=number, results=results)
<span class="linenr">31: </span>
<span class="linenr">32: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_web</span>():
<span class="linenr">33: </span><span style="background-color: #f2f2f2;"> </span>   bottle.run(host=<span style="color: #8b2252;">"127.0.0.1"</span>, port=8081)
<span class="linenr">34: </span>
<span class="linenr">35: </span>fizzbuzz_web()
</pre>
</div>

<p>
Nach dem Start des Webservers kann die Webseite
<a href="http://localhost:8081/fizzbuzz/20">http://localhost:8081/fizzbuzz/20</a> aufgerufen werden.
</p>

<p>
Die Webanwendung kann in einen bestehenden Webserver, wie z.B. apache
mit Hilfe des Moduls <a href="http://www.modwsgi.org">mod wsgi</a> integriert werden. Die Integration wird
z.B. in der <a href="http://bottlepy.org/docs/dev/deployment.html">Dokumentation von bottlepy</a> beschrieben.
</p>

<p>
Zunächst wird das apache2-Modul installiert. Eine Dokumentation
befindet sich danach unter <code>/usr/share/doc/libapache2-mod-py3</code>.
</p>

<div class="org-src-container">

<pre class="src src-sh">sudo apt install libapache2-mod-py3
</pre>
</div>

<p>
Die folgende Datei wird als Einstiegspunkt im Webroot abgelegt -
z.B. in <code>/var/www/fizzbuzz/index.wsgi</code>.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> os
<span class="linenr"> 2: </span><span style="color: #a020f0;">import</span> bottle
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">change working directory</span>
<span class="linenr"> 5: </span>os.chdir(os.path.dirname(__file__))
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">create the app</span>
<span class="linenr"> 8: </span><span style="color: #a0522d;">application</span> = bottle.Bottle()
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #228b22;">@application.route</span>(<span style="color: #8b2252;">"/&lt;number:int&gt;"</span>)
<span class="linenr">11: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_web_route</span>(number):    
<span class="linenr">12: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">results</span> = []
<span class="linenr">13: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(number):
<span class="linenr">14: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr">15: </span>            results.append(<span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr">16: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr">17: </span>            results.append(<span style="color: #8b2252;">"fizz"</span>)
<span class="linenr">18: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">19: </span>            results.append(<span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">20: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">21: </span>            results.append(i)
<span class="linenr">22: </span>
<span class="linenr">23: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">html</span> = <span style="color: #8b2252;">"""</span>
<span class="linenr">24: </span><span style="color: #8b2252;">        &lt;!DOCTYPE html&gt;</span>
<span class="linenr">25: </span><span style="color: #8b2252;">        &lt;html&gt;</span>
<span class="linenr">26: </span><span style="color: #8b2252;">          &lt;body&gt;</span>
<span class="linenr">27: </span><span style="color: #8b2252;">            &lt;h1&gt;FizzBuzz Numbers up to {{max}}&lt;/h1&gt;</span>
<span class="linenr">28: </span><span style="color: #8b2252;">            &lt;table&gt;</span>
<span class="linenr">29: </span><span style="color: #8b2252;">            % for r in results:</span>
<span class="linenr">30: </span><span style="color: #8b2252;">              &lt;tr&gt;&lt;td&gt; {{r}} &lt;/td&gt;&lt;/tr&gt;</span>
<span class="linenr">31: </span><span style="color: #8b2252;">            %end</span>
<span class="linenr">32: </span><span style="color: #8b2252;">            &lt;/table&gt;</span>
<span class="linenr">33: </span><span style="color: #8b2252;">          &lt;/body&gt;</span>
<span class="linenr">34: </span><span style="color: #8b2252;">        &lt;/html&gt;</span>
<span class="linenr">35: </span><span style="color: #8b2252;">        """</span>
<span class="linenr">36: </span>
<span class="linenr">37: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">return</span> bottle.template(html, <span style="color: #483d8b;">max</span>=number, results=results)
</pre>
</div>

<p>
Anschließend wird die Webserverkonfiguration so angepasst, dass sie
den neuen Einstiegspunkt verwendet:
</p>

<div class="org-src-container">

<pre class="src src-html">&lt;<span style="color: #0000ff;">VirtualHost</span> *&gt;
    ServerName www.example.com

    WSGIDaemonProcess fizzbuzz user=www-data group=www-data processes=1 threads=5
    WSGIScriptAlias / /var/www/fizzbuzz/index.wsgi

    &lt;<span style="color: #0000ff;">Directory</span> /var/www/fizzbuzz&gt;
        WSGIProcessGroup fizzbuzz
        WSGIApplicationGroup %{GLOBAL}
        Require all granted
    &lt;/<span style="color: #0000ff;">Directory</span>&gt;
&lt;/<span style="color: #0000ff;">VirtualHost</span>&gt;
</pre>
</div>

<p>
Nach einem Neustart des Webservers
</p>

<div class="org-src-container">

<pre class="src src-sh">sudo service apache2 restart
</pre>
</div>

<p>
ist die Seite unter der URL <a href="http://localhost/fizzbuzz/20">http://localhost/fizzbuzz/20</a> erreichbar.
</p>
</div>
</div>

<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13"><span class="section-number-2">13</span> In git-repo einchecken</h2>
<div class="outline-text-2" id="text-13">
<p>
Ein typischer Ablauf wird z.B. bei <a href="https://guides.github.com/introduction/flow/">github</a> vorgestellt. Dort gibt es
auch ein <a href="https://pel-daniel.github.io/git-init/index.html">interaktives Tutorial inklusive Spickzettel</a>.
</p>

<div class="org-src-container">

<pre class="src src-sh"><span class="linenr"> 1: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">Ein Verzeichnis erstellen und den Quelltext kopieren/erstellen</span>
<span class="linenr"> 2: </span>mkdir /tmp/fizzbuzz_repo
<span class="linenr"> 3: </span><span style="color: #483d8b;">cd</span> /tmp/fizzbuzz_repo
<span class="linenr"> 4: </span><span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">'print("Hallo Welt")'</span> &gt; hallo.py
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">Repo initialisieren</span>
<span class="linenr"> 7: </span>git init
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">Dateien f&#252;r commit vormerken</span>
<span class="linenr">10: </span>git add hallo.py
<span class="linenr">11: </span>
<span class="linenr">12: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">Dateien in Repo einchecken</span>
<span class="linenr">13: </span>git commit -m <span style="color: #8b2252;">"commit hallo.py"</span> hallo.py
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">Logfile anschauen</span>
<span class="linenr">16: </span>git log
<span class="linenr">17: </span>
<span class="linenr">18: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">Feature branch erzeugen und wechseln</span>
<span class="linenr">19: </span>git checkout -b new_feature
<span class="linenr">20: </span>
<span class="linenr">21: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">Dateien &#228;ndern</span>
<span class="linenr">22: </span><span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">'print("new feature")'</span> &gt;&gt; hallo.py
<span class="linenr">23: </span>
<span class="linenr">24: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">Einen Commit im neuen Branch erzeugen</span>
<span class="linenr">25: </span>git commit -m <span style="color: #8b2252;">"added new feature"</span> hallo.py
<span class="linenr">26: </span>
<span class="linenr">27: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">Zur&#252;ck zum Hauptbranch wechseln</span>
<span class="linenr">28: </span>git checkout master
<span class="linenr">29: </span>
<span class="linenr">30: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">Feature-Branch in den Hauptzweig integrieren</span>
<span class="linenr">31: </span>git merge new_feature
<span class="linenr">32: </span>
<span class="linenr">33: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">Wenn alles geklappt hat, kann der Feature Branch gel&#246;scht werden</span>
<span class="linenr">34: </span>git branch -d new_feature
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14"><span class="section-number-2">14</span> Als installierbares Programm</h2>
<div class="outline-text-2" id="text-14">
<p>
Zunächst muss eine Datei <code>setup.py</code> angelegt werden. Sie könnte
folgenden Inhalt haben:
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr">1: </span><span style="color: #a020f0;">from</span> setuptools <span style="color: #a020f0;">import</span> setup, find_packages
<span class="linenr">2: </span>
<span class="linenr">3: </span>setup(
<span class="linenr">4: </span><span style="background-color: #f2f2f2;"> </span>   name = <span style="color: #8b2252;">"fizzbuzz_katas"</span>,
<span class="linenr">5: </span><span style="background-color: #f2f2f2;"> </span>   version = <span style="color: #8b2252;">"0.1"</span>,
<span class="linenr">6: </span><span style="background-color: #f2f2f2;"> </span>   description = <span style="color: #8b2252;">"Exercises with the famous FizzBuzz-Game."</span>,
<span class="linenr">7: </span><span style="background-color: #f2f2f2;"> </span>   packages = find_packages()
<span class="linenr">8: </span>)
</pre>
</div>

<p>
Das Programm kann dann mit folgenden Befehlen installiert oder
erstellt werden:
</p>

<div class="org-src-container">

<pre class="src src-sh"><span class="linenr">1: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">Release in Unterordner erstellen: </span>
<span class="linenr">2: </span>python setup.py sdist
</pre>
</div>

<p>
Anschließend kann das Paket (lokal) installiert werden.
</p>

<div class="org-src-container">

<pre class="src src-sh"><span class="linenr">1: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">Systemweite Installation:</span>
<span class="linenr">2: </span>python setup.py install
<span class="linenr">3: </span>
<span class="linenr">4: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">Lokale Installation:</span>
<span class="linenr">5: </span><span style="color: #b22222;">#</span><span style="color: #b22222;">python setup.py install --user</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15"><span class="section-number-2">15</span> Als getestetes Programm (mit unittest und doctests)</h2>
<div class="outline-text-2" id="text-15">
<p>
Bei einem UnitTest testet eine Testklasse die Methoden einer anderen
Klasse und prüft einen erhaltenen Ist-Wert gegen den erwarteten
Soll-Wert. In Python geschiet dies über das Paket <a href="https://docs.python.org/3/library/unittest.html">unittest</a>.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> unittest
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzz</span>:
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz</span>(<span style="color: #a020f0;">self</span>, i):
<span class="linenr"> 5: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr"> 6: </span>            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizzbuzz"</span>
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr"> 8: </span>            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizz"</span>
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">10: </span>            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"buzz"</span>
<span class="linenr">11: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">12: </span>            <span style="color: #a020f0;">return</span> i
<span class="linenr">13: </span>
<span class="linenr">14: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzzTest</span>(unittest.TestCase):
<span class="linenr">15: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #8b2252;">"""This test class tests the class FizzBuzz. </span>
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="color: #8b2252; background-color: #f2f2f2;"> </span><span style="color: #8b2252;">   Possible input will be testet against desired outputs."""</span>
<span class="linenr">18: </span>
<span class="linenr">19: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">setUp</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">20: </span>        <span style="color: #8b2252;">"""Will be invoked before every test."""</span>
<span class="linenr">21: </span>        <span style="color: #a020f0;">self</span>.fizzbuzz = FizzBuzz()
<span class="linenr">22: </span>
<span class="linenr">23: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">test_fizzbuzz</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">24: </span>        <span style="color: #a0522d;">fb</span> = <span style="color: #a020f0;">self</span>.fizzbuzz
<span class="linenr">25: </span>
<span class="linenr">26: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">Comparing values</span>
<span class="linenr">27: </span>        <span style="color: #a020f0;">self</span>.assertEqual(fb.fizzbuzz(2), 2)
<span class="linenr">28: </span>        <span style="color: #a020f0;">self</span>.assertEqual(fb.fizzbuzz(15), <span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr">29: </span>        <span style="color: #a020f0;">self</span>.assertEqual(fb.fizzbuzz(9), <span style="color: #8b2252;">"fizz"</span>)
<span class="linenr">30: </span>        <span style="color: #a020f0;">self</span>.assertEqual(fb.fizzbuzz(10), <span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">31: </span>
<span class="linenr">32: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">Boolean comparison</span>
<span class="linenr">33: </span>        <span style="color: #a020f0;">self</span>.assertTrue(fb.fizzbuzz(12) != 12)
<span class="linenr">34: </span>        <span style="color: #a020f0;">self</span>.assertFalse(fb.fizzbuzz(12) == 12)
<span class="linenr">35: </span>
<span class="linenr">36: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">Comparing types</span>
<span class="linenr">37: </span>        <span style="color: #a020f0;">self</span>.assertIsInstance(fb.fizzbuzz(2), <span style="color: #483d8b;">int</span>)
<span class="linenr">38: </span>
<span class="linenr">39: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">Comparing with collections</span>
<span class="linenr">40: </span>        <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(20):
<span class="linenr">41: </span>            <span style="color: #a0522d;">result</span> = fb.fizzbuzz(i)            
<span class="linenr">42: </span>            <span style="color: #a020f0;">self</span>.assertIn(result, [<span style="color: #8b2252;">'fizz'</span>, <span style="color: #8b2252;">'buzz'</span>, <span style="color: #8b2252;">'fizzbuzz'</span>, i])
<span class="linenr">43: </span>
<span class="linenr">44: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">run_unit_tests</span>():
<span class="linenr">45: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">Run all unit tests</span>
<span class="linenr">46: </span><span style="background-color: #f2f2f2;"> </span>   unittest.main()
<span class="linenr">47: </span>
<span class="linenr">48: </span>run_unit_tests()
</pre>
</div>

<p>
Die Tests können bei Python auch direkt in den Kommentaren stehen. In
diesem Fall spricht man von einem <a href="https://docs.python.org/3/library/doctest.html">doctest</a>. Die Zeichen "<code>&gt;&gt;&gt;</code>"
beschreiben die Eingabe, direkt darunter kommt die erwartete Ausgabe.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> doctest
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzz</span>:
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz</span>(<span style="color: #a020f0;">self</span>, i):
<span class="linenr"> 5: </span>        <span style="color: #8b2252;">"""This is a comment containing a test. This is called a doctest in Python.</span>
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #8b2252;">        &gt;&gt;&gt; fb = FizzBuzz()</span>
<span class="linenr"> 8: </span><span style="color: #8b2252;">        &gt;&gt;&gt; fb.fizzbuzz(3)</span>
<span class="linenr"> 9: </span><span style="color: #8b2252;">        'fizz'</span>
<span class="linenr">10: </span><span style="color: #8b2252;">        &gt;&gt;&gt; fb.fizzbuzz(5)</span>
<span class="linenr">11: </span><span style="color: #8b2252;">        'buzz'</span>
<span class="linenr">12: </span><span style="color: #8b2252;">        &gt;&gt;&gt; fb.fizzbuzz(10)</span>
<span class="linenr">13: </span><span style="color: #8b2252;">        'buzz'</span>
<span class="linenr">14: </span><span style="color: #8b2252;">        &gt;&gt;&gt; fb.fizzbuzz(11)</span>
<span class="linenr">15: </span><span style="color: #8b2252;">        11</span>
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="color: #8b2252;">        Now a test that creates an error:</span>
<span class="linenr">18: </span>
<span class="linenr">19: </span><span style="color: #8b2252;">        &gt;&gt;&gt; fb.fizzbuzz(12)</span>
<span class="linenr">20: </span><span style="color: #8b2252;">        12</span>
<span class="linenr">21: </span>
<span class="linenr">22: </span><span style="color: #8b2252;">        """</span>
<span class="linenr">23: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr">24: </span>            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizzbuzz"</span>
<span class="linenr">25: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr">26: </span>            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizz"</span>
<span class="linenr">27: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">28: </span>            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"buzz"</span>
<span class="linenr">29: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">30: </span>            <span style="color: #a020f0;">return</span> i
<span class="linenr">31: </span>
<span class="linenr">32: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">run_doc_tests</span>():
<span class="linenr">33: </span><span style="background-color: #f2f2f2;"> </span>   doctest.testmod()
<span class="linenr">34: </span>
<span class="linenr">35: </span>run_doc_tests()
</pre>
</div>

<pre class="example">
**********************************************************************
File "&lt;stdin&gt;", line 19, in __main__.FizzBuzz.fizzbuzz
Failed example:
    fb.fizzbuzz(12)
Expected:
    12
Got:
    'fizz'
**********************************************************************
1 items had failures:
   1 of   6 in __main__.FizzBuzz.fizzbuzz
***Test Failed*** 1 failures.
</pre>
</div>
</div>

<div id="outline-container-sec-16" class="outline-2">
<h2 id="sec-16"><span class="section-number-2">16</span> Mit einem EA-Modul ansteuern</h2>
<div class="outline-text-2" id="text-16">

<div class="figure">
<p><img src="doc/ea_modul_an_pi.jpg" alt="ea_modul_an_pi.jpg" width="500px" />
</p>
</div>

<p>
Die Bibliothek <code>eapi</code> (<a href="https://github.com/pintman/ea_rpi_modul">https://github.com/pintman/ea_rpi_modul</a>) kann
über <code>pip</code> installiert werden.
</p>

<div class="org-src-container">

<pre class="src src-sh">pip install eapi
</pre>
</div>

<p>
Nun kann es verwendet werden. Die wichtigste Klasse ist
<code>eapi.hw.EAModul</code>.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> eapi.hw 
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzzEAModul</span>:
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr"> 5: </span>        <span style="color: #a020f0;">self</span>.i = 0
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>        <span style="color: #a0522d;">eam</span> = eapi.hw.EAModul()
<span class="linenr"> 8: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">switching on green LED only</span>
<span class="linenr"> 9: </span>        eam.schalte_leds(<span style="color: #008b8b;">False</span>, <span style="color: #008b8b;">False</span>, <span style="color: #008b8b;">True</span>)
<span class="linenr">10: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">register for events when button0 pressed</span>
<span class="linenr">11: </span>        eam.taster_event_registrieren(0, <span style="color: #a020f0;">self</span>.taster0_gedrueckt)
<span class="linenr">12: </span>
<span class="linenr">13: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">wait for taster event</span>
<span class="linenr">14: </span>        <span style="color: #a020f0;">while</span> <span style="color: #008b8b;">True</span>:
<span class="linenr">15: </span>            <span style="color: #a020f0;">pass</span>
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">taster0_gedrueckt</span>(<span style="color: #a020f0;">self</span>, pin):
<span class="linenr">18: </span>        <span style="color: #a020f0;">if</span> <span style="color: #a020f0;">self</span>.i % 3 == 0 <span style="color: #a020f0;">and</span> <span style="color: #a020f0;">self</span>.i % 5 == 0:
<span class="linenr">19: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr">20: </span>        <span style="color: #a020f0;">elif</span> <span style="color: #a020f0;">self</span>.i % 3 == 0:
<span class="linenr">21: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizz"</span>)
<span class="linenr">22: </span>        <span style="color: #a020f0;">elif</span> <span style="color: #a020f0;">self</span>.i % 5 == 0:
<span class="linenr">23: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">24: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">25: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #a020f0;">self</span>.i)
<span class="linenr">26: </span>
<span class="linenr">27: </span>        <span style="color: #a020f0;">self</span>.i += 1
<span class="linenr">28: </span>
<span class="linenr">29: </span>FizzBuzzEAModul()
</pre>
</div>

<p>
Eine Hilfe zu dem Modul lässt sich über pydoc abrufen.
</p>

<div class="org-src-container">

<pre class="src src-sh">python -m pydoc eapi.hw.EAModul
</pre>
</div>

<pre class="example">
Help on class EAModul in eapi.hw:

eapi.hw.EAModul = class EAModul(builtins.object)
 |  Die Klasse EAModul hilft bei der Ansteuerung eines Eingabe-Ausgabe-Moduls
 |  für den Raspberry Pi. Es besteht aus drei LED und zwei Tastern.
 |  
 |  Methods defined here:
 |  
 |  __init__(self, pin_taster0=29, pin_taster1=31, pin_led_rot=33, pin_led_gelb=35, pin_led_gruen=37)
 |      Das Modul wird mit den gegebenen Pins konfiguriert.
 |      
 |      Pins der LEDs werden als Ausgänge und Pins der Taster als Eingänge
 |      konfiguriert. Wenn keine PINS angegeben werden, werden die PINs
 |      oberhalb des GND Pins links unten verwendet.
 |      
 |      &gt;&gt;&gt; from eapi.hw import EAModul
 |      
 |      Wenn keine Werte angegeben werden, werden die Standard-Pins verwendet.
 |      
 |      &gt;&gt;&gt; ea1 = EAModul()
 |      &gt;&gt;&gt; ea1.cleanup()
 |      
 |      Bei einer abweichenden Verdrahtung können die Pins angegeben werden.
 |      
 |      &gt;&gt;&gt; ea2 = EAModul(29, 31, 33, 35, 37)
 |      
 |      Um den Quelltext übersichtlicher zu gestalten, können die Pins
 |      direkt bezeichnet werden.
 |      
 |      &gt;&gt;&gt; ea2 = EAModul(pin_taster0=29, pin_taster1=31, pin_led_rot=33,
 |      ...               pin_led_gelb=35, pin_led_gruen=37)
 |      &gt;&gt;&gt; ea2.cleanup()
 |  
 |  cleanup(self)
 |      Setzt alle Pins des Pi wieder in den Ausgangszustand.
 |      
 |      &gt;&gt;&gt; from eapi.hw import EAModul
 |      &gt;&gt;&gt; ea = EAModul()
 |      &gt;&gt;&gt; ea.cleanup()
 |  
 |  led_event_registrieren(self, led_farbe, methode)
 |      Registriert eine Methode, die ausgeführt wird, sobald die
 |      entsprechende LED ihren Wert ändert.
 |      
 |      Die Methode wird über alle Veränderungen an der LED informiert. Dazu
 |      wird die übergebene Methode aufgerufen.
 |      
 |      &gt;&gt;&gt; from eapi.hw import EAModul
 |      
 |      &gt;&gt;&gt; def update_rote_led(neuer_wert):
 |      ...    print("update: Status der roten LED hat sich geändert.")
 |      ...    print("Neuer Wert:", neuer_wert)
 |      
 |      &gt;&gt;&gt; ea = EAModul()
 |      &gt;&gt;&gt; ea.led_event_registrieren(EAModul.LED_ROT, update_rote_led)
 |      
 |      Nun wird die Update-Methode aufgerufen, sobald sich der Wert der LED
 |      ändert.
 |      
 |      &gt;&gt;&gt; ea.schalte_led(EAModul.LED_ROT, 1)
 |      update: Status der roten LED hat sich geändert.
 |      Neuer Wert: 1
 |      
 |      &gt;&gt;&gt; ea.schalte_led(EAModul.LED_ROT, 0)
 |      update: Status der roten LED hat sich geändert.
 |      Neuer Wert: 0
 |      
 |      &gt;&gt;&gt; ea.cleanup()
 |  
 |  schalte_led(self, led_farbe, an_aus)
 |      Schalte die LED mit der gegebenen Nummer ein (1) oder aus (0).
 |      
 |      Der Wert für led_farbe ist LED_ROT, LED_GELB oder LED_GRUEN.
 |      
 |      Eine einfache Verwendung könnte wie folgt aussehen:
 |      
 |      &gt;&gt;&gt; from eapi.hw import EAModul
 |      
 |      &gt;&gt;&gt; ea_modul = EAModul()
 |      &gt;&gt;&gt; ea_modul.schalte_led(EAModul.LED_ROT, 1)
 |      &gt;&gt;&gt; ea_modul.schalte_led(EAModul.LED_GELB, 0)
 |      &gt;&gt;&gt; ea_modul.schalte_led(EAModul.LED_GRUEN, 1)
 |      &gt;&gt;&gt; ea_modul.cleanup()
 |  
 |  schalte_leds(self, rot_anaus, gelb_anaus, gruen_anaus)
 |      Schalte alle drei LEDs zu gleichen Zeit an oder aus.
 |      
 |      &gt;&gt;&gt; from eapi.hw import EAModul
 |      
 |      &gt;&gt;&gt; ea_modul = EAModul()
 |      &gt;&gt;&gt; ea_modul.schalte_leds(True, False, True)
 |      &gt;&gt;&gt; ea_modul.cleanup()
 |  
 |  taster_event_registrieren(self, taster_nr, methode)
 |      Registriere eine Methode, die bei Betätigung eines Tasters
 |      ausgeführt wird.
 |      
 |      Die übergebene Methode muss ein Argument haben und wird mit der
 |      Pin-Nur des Tasters aufgerufen, sobald der Taster gedrückt 
 |      wird. Eine einfache Verwendung könnte wie folgt aussehen:
 |      
 |      &gt;&gt;&gt; def taster0_gedrueckt(pin):
 |      ...  print("Taster 0 wurde gedrückt.")
 |      
 |      &gt;&gt;&gt; ea_modul = EAModul()
 |      &gt;&gt;&gt; ea_modul.taster_event_registrieren(0, taster0_gedrueckt)
 |      &gt;&gt;&gt; ea_modul.cleanup()
 |  
 |  taster_gedrueckt(self, num=0)
 |      Liest den Wert des Tasters mit der gegebenen Nummer aus und gibt den
 |      Wert zurück. Eine einfache Verwendung könnte wie folgt aussehen:
 |      
 |      &gt;&gt;&gt; from eapi.hw import EAModul
 |      &gt;&gt;&gt; import time
 |      
 |      &gt;&gt;&gt; ea_modul = EAModul()
 |      &gt;&gt;&gt; while not ea_modul.taster_gedrueckt(1):
 |      ...   ea_modul.schalte_led(EAModul.LED_ROT, 1)
 |      ...   time.sleep(0.2)
 |      ...   ea_modul.schalte_led(EAModul.LED_ROT, 0)
 |      &gt;&gt;&gt; ea_modul.cleanup()
 |  
 |  ----------------------------------------------------------------------
 |  Data descriptors defined here:
 |  
 |  __dict__
 |      dictionary for instance variables (if defined)
 |  
 |  __weakref__
 |      list of weak references to the object (if defined)
 |  
 |  ----------------------------------------------------------------------
 |  Data and other attributes defined here:
 |  
 |  LED_GELB = 1
 |  
 |  LED_GRUEN = 2
 |  
 |  LED_ROT = 0
</pre>
</div>
</div>

<div id="outline-container-sec-17" class="outline-2">
<h2 id="sec-17"><span class="section-number-2">17</span> Mit Anbindung an eine Datenbank</h2>
<div class="outline-text-2" id="text-17">
<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> sqlite3
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_insert_into_db</span>():
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">conn</span> = sqlite3.connect(<span style="color: #8b2252;">"fizzbuzz.db"</span>)
<span class="linenr"> 5: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">c</span> = conn.cursor()
<span class="linenr"> 6: </span><span style="background-color: #f2f2f2;"> </span>   c.execute(<span style="color: #8b2252;">"CREATE TABLE IF NOT EXISTS fizzbuzz(nr int, ergebnis text)"</span>)
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(20):
<span class="linenr"> 9: </span>        <span style="color: #a0522d;">erg</span> = <span style="color: #8b2252;">""</span>
<span class="linenr">10: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr">11: </span>            <span style="color: #a0522d;">erg</span> = <span style="color: #8b2252;">"fizzbuzz"</span>
<span class="linenr">12: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr">13: </span>            <span style="color: #a0522d;">erg</span> = <span style="color: #8b2252;">"fizz"</span>
<span class="linenr">14: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">15: </span>            <span style="color: #a0522d;">erg</span> = <span style="color: #8b2252;">"buzz"</span>
<span class="linenr">16: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">17: </span>            <span style="color: #a0522d;">erg</span> = i
<span class="linenr">18: </span>
<span class="linenr">19: </span>        c.execute(<span style="color: #8b2252;">"INSERT INTO fizzbuzz VALUES(?,?)"</span>, (i,erg))
<span class="linenr">20: </span>
<span class="linenr">21: </span><span style="background-color: #f2f2f2;"> </span>   conn.commit()
<span class="linenr">22: </span><span style="background-color: #f2f2f2;"> </span>   conn.close()
<span class="linenr">23: </span>
<span class="linenr">24: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_select_from_db</span>():
<span class="linenr">25: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">conn</span> = sqlite3.connect(<span style="color: #8b2252;">"fizzbuzz.db"</span>)
<span class="linenr">26: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">c</span> = conn.cursor()
<span class="linenr">27: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">rows</span> = c.execute(<span style="color: #8b2252;">"SELECT nr, ergebnis FROM fizzbuzz"</span>)
<span class="linenr">28: </span>
<span class="linenr">29: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"Nr.\tErgebnis"</span>)
<span class="linenr">30: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i,erg <span style="color: #a020f0;">in</span> rows:
<span class="linenr">31: </span>        <span style="color: #a020f0;">print</span>(i, <span style="color: #8b2252;">"    "</span>, erg)
<span class="linenr">32: </span>
<span class="linenr">33: </span><span style="background-color: #f2f2f2;"> </span>   conn.close()
<span class="linenr">34: </span>
<span class="linenr">35: </span>fizzbuzz_insert_into_db()
<span class="linenr">36: </span>fizzbuzz_select_from_db()
</pre>
</div>

<p>
Nach dem Versuch entsteht eine Datei <code>fizzbuzz.db</code>, die man mit
<code>sqlite</code> befragen oder auch einfach kopieren und löschen kann.
</p>

<div class="org-src-container">

<pre class="src src-sh">rm fizzbuzz.db
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-18" class="outline-2">
<h2 id="sec-18"><span class="section-number-2">18</span> Mit docstring Dokumentation</h2>
<div class="outline-text-2" id="text-18">
<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzzGame</span>:
<span class="linenr"> 2: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #8b2252;">"""A class for a fizzbuzz game."""</span>
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_documented</span>(n):
<span class="linenr"> 5: </span>        <span style="color: #8b2252;">"""This method runs through all numbers from 0 to n-1.  </span>
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #8b2252;">        It prints 'fizz' if the number is divisible by 3, 'buzz' if it</span>
<span class="linenr"> 8: </span><span style="color: #8b2252;">        is divisble by 5, 'fizzbuzz' if it is divisible 3 and 5 and</span>
<span class="linenr"> 9: </span><span style="color: #8b2252;">        the number itseld otherwise.</span>
<span class="linenr">10: </span><span style="color: #8b2252;">        """</span>
<span class="linenr">11: </span>
<span class="linenr">12: </span>        <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(n):
<span class="linenr">13: </span>            <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr">14: </span>                <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr">15: </span>            <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr">16: </span>                <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizz"</span>)
<span class="linenr">17: </span>            <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">18: </span>                <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">19: </span>            <span style="color: #a020f0;">else</span>:
<span class="linenr">20: </span>                <span style="color: #a020f0;">print</span>(i)
<span class="linenr">21: </span>
<span class="linenr">22: </span><span style="color: #483d8b;">help</span>(FizzBuzzGame)
</pre>
</div>

<pre class="example">
Help on class FizzBuzzGame in module __main__:

class FizzBuzzGame(builtins.object)
 |  A class for a fizzbuzz game.
 |  
 |  Methods defined here:
 |  
 |  fizzbuzz_documented(n)
 |      This method runs through all numbers from 0 to n-1.  
 |      
 |      It prints 'fizz' if the number is divisible by 3, 'buzz' if it
 |      is divisble by 5, 'fizzbuzz' if it is divisible 3 and 5 and
 |      the number itseld otherwise.
 |  
 |  ----------------------------------------------------------------------
 |  Data descriptors defined here:
 |  
 |  __dict__
 |      dictionary for instance variables (if defined)
 |  
 |  __weakref__
 |      list of weak references to the object (if defined)
</pre>

<p>
Der Kommentar einer Methode oder Klasse steht immer als erster
String in der Deklaration.
</p>

<p>
Er kann im Python-Interpreter mit <code>help()</code> abgerufen werden:
</p>

<p>
Außerdem gibt es das Modul <code>pydoc</code>, mit dem eine Dokumentation auf der
Kommandozeile oder über einen Webserver zur Verfügung steht.
</p>

<div class="org-src-container">

<pre class="src src-sh">pydoc3 fizzbuzz.fizzbuzz_dokumentiert
python -m pydoc fizzbuzz.fizzbuzz_dokumentiert
</pre>
</div>

<p>
Webserver starten auf Port 8080 mit Dokumentation unter
<a href="http://localhost:8080">http://localhost:8080</a>
</p>

<div class="org-src-container">

<pre class="src src-sh">pydoc -p 8080

<span style="color: #b22222;"># </span><span style="color: #b22222;">alternativ:</span>
python -m pydoc -p 8080
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-19" class="outline-2">
<h2 id="sec-19"><span class="section-number-2">19</span> Als Chatbot</h2>
<div class="outline-text-2" id="text-19">
<p>
Wir verwenden hier sopel als Web-Framework (<a href="https://sopel.chat/">https://sopel.chat/</a> und
<a href="https://github.com/sopel-irc/sopel/wiki">https://github.com/sopel-irc/sopel/wiki</a>). 
</p>

<p>
Andere Bots sind etwa <a href="http://errbot.io/">err</a> oder der <a href="https://github.com/python-telegram-bot/python-telegram-bot">pyton-telegram-bot</a>.
</p>

<p>
Installation
</p>
<div class="org-src-container">

<pre class="src src-sh">pip install sopel
</pre>
</div>


<p>
Konfiguration (in <code>~/.sopel</code>) erstellen: 
</p>
<div class="org-src-container">

<pre class="src src-sh">sopel
</pre>
</div>

<p>
Nach ein paar Fragen könnte die Konfiguration wie folgt aussehen.
</p>

<div class="org-src-container">

<pre class="src src-sh"><span class="linenr">1: </span>[core]
<span class="linenr">2: </span>nick = FizzBuzzBot
<span class="linenr">3: </span>host = irc.freenode.net
<span class="linenr">4: </span>use_ssl = false
<span class="linenr">5: </span>port = 6667
<span class="linenr">6: </span>owner = fizzbuzz_owner
<span class="linenr">7: </span>channels = <span style="color: #b22222;">#</span><span style="color: #b22222;">fizzbuzz</span>
</pre>
</div>

<p>
Eigenen Bot in <code>~/.sopel/modules/fizzbuzz.py</code> erstellen
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">from</span> sopel <span style="color: #a020f0;">import</span> module
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #228b22;">@module.commands</span>(<span style="color: #8b2252;">'fizzbuzz'</span>)
<span class="linenr"> 4: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">echo</span>(bot, trigger):
<span class="linenr"> 5: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">to everybody:   bot.say("...")</span>
<span class="linenr"> 6: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">to questioner: bot.reply("...")</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">take and convert argument</span>
<span class="linenr"> 9: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">i</span> = <span style="color: #483d8b;">int</span>(trigger.group(2))
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr">12: </span>        bot.reply(<span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr">13: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr">14: </span>        bot.reply(<span style="color: #8b2252;">"fizz"</span>)
<span class="linenr">15: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">16: </span>        bot.reply(<span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">17: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">else</span>:
<span class="linenr">18: </span>        bot.reply(i)
</pre>
</div>

<p>
Sopel starten
</p>
<div class="org-src-container">

<pre class="src src-sh">sopel
</pre>
</div>

<p>
Eine mögliche Chat-Konversation (Sopel-Befehle beginnen mit einem
Punkt):
</p>

<pre class="example">
= FizzBuzzBot has joined
&lt;fizzbuzz_owner&gt; .fizzbuzz 1
&lt;FizzBuzzBot&gt;    fizzbuzz_owner: 1
&lt;fizzbuzz_owner&gt; .fizzbuzz 2
&lt;FizzBuzzBot&gt;    fizzbuzz_owner: 2
&lt;fizzbuzz_owner&gt; .fizzbuzz 3
&lt;FizzBuzzBot&gt;    fizzbuzz_owner: fizz
&lt;fizzbuzz_owner&gt; .fizzbuzz 5
&lt;FizzBuzzBot&gt;    fizzbuzz_owner: buzz
&lt;fizzbuzz_owner&gt; .fizzbuzz 14
&lt;FizzBuzzBot&gt;    fizzbuzz_owner: 14
&lt;fizzbuzz_owner&gt; .fizzbuzz 15
&lt;FizzBuzzBot&gt;    fizzbuzz_owner: fizzbuzz
</pre>
</div>
</div>

<div id="outline-container-sec-20" class="outline-2">
<h2 id="sec-20"><span class="section-number-2">20</span> Auf einem Cluster (mit GNU parallel)</h2>
<div class="outline-text-2" id="text-20">
<p>
Hierfür bedienen wir uns des Programmes GNU parallel. Es muss auf dem
Rechner installiert sein oder lässt sich unter Ubuntu leicht nachinstallieren.
</p>

<pre class="example">
sudo apt-get install parallel
</pre>

<p>
Wir nutzen die folgende Datei <code>fizzbuzz.py</code>.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> sys
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_cluster</span>():
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">i</span> = <span style="color: #483d8b;">int</span> (sys.argv[1])
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">print</span>(i, <span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr"> 8: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">print</span>(i, <span style="color: #8b2252;">"fizz"</span>)
<span class="linenr">10: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">11: </span>        <span style="color: #a020f0;">print</span>(i, <span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">12: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">else</span>:
<span class="linenr">13: </span>        <span style="color: #a020f0;">print</span>(i, i)
<span class="linenr">14: </span>
<span class="linenr">15: </span>fizzbuzz_cluster()
</pre>
</div>

<p>
Zuerst muss die Datei <code>fizzbuzz.py</code> auf jeden Rechner im Cluster
übertragen werden und der ssh-login gemäß der Beschreibung in <code>man
parallel</code> eingerichtet worden sein. Dies wird im Abschnitt "EXAMPLE:
Using remote computers" der man-page beschrieben.
</p>

<p>
Nun folgt der Aufruf:
</p>

<div class="org-src-container">

<pre class="src src-sh">seq 20 | parallel --sshlogin server1,server2,server3 python3 fizzbuzz.py
</pre>
</div>

<p>
<code>seq 20</code> generiert die Zahlen 1 bis 20 und sendet sie über eine Pipe (<code>|</code>)
an den Befehl <code>parallel</code>. Dieser verteilt die Aufrufe
</p>

<ul class="org-ul">
<li><code>python3 fizzbuzz.py 1</code>,
</li>
<li><code>python3 fizzbuzz.py 2</code>,
</li>
<li><code>python3 fizzbuzz.py 3</code>,
</li>
<li><code>python3 fizzbuzz.py 4</code>',
</li>
</ul>

<p>
auf die Server server1, server2 und server3.
</p>
</div>
</div>

<div id="outline-container-sec-21" class="outline-2">
<h2 id="sec-21"><span class="section-number-2">21</span> In einem UML-Aktivitätsdiagramm</h2>
<div class="outline-text-2" id="text-21">

<div class="figure">
<p><img src="doc/fizzbuzz-aktdiag.png" alt="fizzbuzz-aktdiag.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-22" class="outline-2">
<h2 id="sec-22"><span class="section-number-2">22</span> In einem UML-Sequenzdiagramm</h2>
<div class="outline-text-2" id="text-22">
<p>
Der FizzbuzzServer hat eine Methode <code>fizzbuzz(zahl: int): answer</code>, die
von einem Client mit einer Zahl aufgerufen werden kann. Die Antwort
ist eine Zahl oder ein String.
</p>


<div class="figure">
<p><img src="doc/fizzbuzz-seqdiag.png" alt="fizzbuzz-seqdiag.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-23" class="outline-2">
<h2 id="sec-23"><span class="section-number-2">23</span> In einem UML-Klassendiagramm</h2>
<div class="outline-text-2" id="text-23">

<div class="figure">
<p><img src="doc/fizzbuzz_klassendiagramm.png" alt="fizzbuzz_klassendiagramm.png" />
</p>
</div>

<p>
Attribute und Methoden sind mit einer <i>Sichtbarkeit</i> (+=public
(überall zugreifbar), #=protected (aus der Klasse selbst und
Kindklassen zugreifbar), -=private (nur aus der Klasse selbst
zugreifbar)) und einem <i>Rückgabewert bzw. Typ</i> gekennzeichnet.
</p>

<p>
Dies Klasse könnte wie folgt verwendet werden.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzzGame</span>:
<span class="linenr"> 2: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, n):
<span class="linenr"> 3: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">protected/private attributes are marked with one/two underscores</span>
<span class="linenr"> 4: </span>        <span style="color: #a020f0;">self</span>.__number = n
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">if</span> <span style="color: #a020f0;">self</span>.__number % 3 == 0 <span style="color: #a020f0;">and</span> <span style="color: #a020f0;">self</span>.__number % 5 == 0:
<span class="linenr"> 8: </span>            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizzbuzz"</span>
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">elif</span> <span style="color: #a020f0;">self</span>.__number % 3 == 0:
<span class="linenr">10: </span>            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizz"</span>
<span class="linenr">11: </span>        <span style="color: #a020f0;">elif</span> <span style="color: #a020f0;">self</span>.__number % 5 == 0:
<span class="linenr">12: </span>            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"buzz"</span>
<span class="linenr">13: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">14: </span>            <span style="color: #a020f0;">return</span> <span style="color: #a020f0;">self</span>.__number
<span class="linenr">15: </span>
<span class="linenr">16: </span><span style="color: #a0522d;">fb</span> = FizzBuzzGame(2)
<span class="linenr">17: </span><span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"Eingabe:"</span>, 2, <span style="color: #8b2252;">"Ausgabe:"</span>, fb.fizzbuzz())
<span class="linenr">18: </span><span style="color: #a0522d;">fb</span> = FizzBuzzGame(15)
<span class="linenr">19: </span><span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"Eingabe:"</span>, 15, <span style="color: #8b2252;">"Ausgabe:"</span>, fb.fizzbuzz())
</pre>
</div>

<pre class="example">
Eingabe: 2 Ausgabe: 2
Eingabe: 15 Ausgabe: fizzbuzz
</pre>

<p>
Da es sich bei fizzbuzz um ein Spiel handelt, bietet es sich an,
Vererbung an dieser Stelle zu nutzen. Der Pfeil zwischen den Klassen
wird in Pfeilrichtung als "ist ein" gelesen.
</p>


<div class="figure">
<p><img src="doc/fizzbuzz_klassendiagramm-vererbung.png" alt="fizzbuzz_klassendiagramm-vererbung.png" />
</p>
</div>

<p>
Da das Spiel gewöhnlich von einem Spieler gespielt wird, kann dies als
eine "hat"-Beziehung durch eine <a href="https://de.wikipedia.org/wiki/Assoziation_(UML)#Aggregation_und_Komposition">Aggregation-Beziehung</a> mit einer nicht
ausgefüllten Raute dargestellt werden.
</p>


<div class="figure">
<p><img src="doc/fizzbuzz_klassendiagramm-komp-aggr.png" alt="fizzbuzz_klassendiagramm-komp-aggr.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-24" class="outline-2">
<h2 id="sec-24"><span class="section-number-2">24</span> Als IOT-Anwendung mit einem Message-Broker (MQTT)</h2>
<div class="outline-text-2" id="text-24">
<p>
<a href="https://de.wikipedia.org/wiki/MQTT">MQTT</a> ist ein u.a. von IBM entwickeltes offenes Protokoll, das auf Port
1883 und 8883 (mit Verschlüsselung) läuft und für die Übertragung von
Sensordaten zwischen Maschinen entwickelt wurde. Ein <a href="https://heise.de/-2168152">Artikel bei heise</a>
und ein <a href="https://dzone.com/articles/mqtt-the-nerve-system-of-iot">Artikel bei dzone</a> beschreiben das Protokoll ausführlich.
</p>

<p>
Als Client-Bibliothek wird <a href="https://pypi.python.org/pypi/paho-mqtt/">paho-mqtt</a> verwendet. Diese lässt sich
einfach installieren.
</p>

<div class="org-src-container">

<pre class="src src-sh">pip install --user paho-mqtt
</pre>
</div>

<p>
Eine mögliche Kommunikation zwischen zwei Clients und dem Broker.
</p>


<div class="figure">
<p><img src="doc/fizzbuzz-mqtt.png" alt="fizzbuzz-mqtt.png" />
</p>
</div>


<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> paho.mqtt.client <span style="color: #a020f0;">as</span> mqtt
<span class="linenr"> 2: </span><span style="color: #a020f0;">import</span> threading
<span class="linenr"> 3: </span><span style="color: #a020f0;">import</span> time
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzbuzzPublisher</span>:
<span class="linenr"> 6: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, server=<span style="color: #8b2252;">"iot.eclipse.org"</span>, port=1883):
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">self</span>.client = mqtt.Client()
<span class="linenr"> 8: </span>        <span style="color: #a020f0;">self</span>.client.connect(server, port, keepalive=60)
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">publish</span>(<span style="color: #a020f0;">self</span>, payload):
<span class="linenr">11: </span>        <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"[publish]"</span>, payload)
<span class="linenr">12: </span>        <span style="color: #a020f0;">self</span>.client.publish(<span style="color: #8b2252;">"fizzbuzz/"</span>, payload)
<span class="linenr">13: </span>
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzbuzzSubscriber</span>:
<span class="linenr">16: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, server=<span style="color: #8b2252;">"iot.eclipse.org"</span>, port=1883):
<span class="linenr">17: </span>        <span style="color: #a020f0;">self</span>.client = mqtt.Client()
<span class="linenr">18: </span>        <span style="color: #a020f0;">self</span>.client.on_connect = <span style="color: #a020f0;">self</span>.on_connect
<span class="linenr">19: </span>        <span style="color: #a020f0;">self</span>.client.on_message = <span style="color: #a020f0;">self</span>.on_message
<span class="linenr">20: </span>        <span style="color: #a020f0;">self</span>.client.connect(server, port, keepalive=60)
<span class="linenr">21: </span>
<span class="linenr">22: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">start</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">23: </span>        <span style="color: #a020f0;">self</span>.client.loop_forever()
<span class="linenr">24: </span>
<span class="linenr">25: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">on_connect</span>(<span style="color: #a020f0;">self</span>, client, userdata, flags, rc):
<span class="linenr">26: </span>        <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"[connected]"</span>)
<span class="linenr">27: </span>        <span style="color: #a020f0;">self</span>.client.subscribe(<span style="color: #8b2252;">"fizzbuzz/"</span>)
<span class="linenr">28: </span>
<span class="linenr">29: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">on_message</span>(<span style="color: #a020f0;">self</span>, client, userdata, msg):
<span class="linenr">30: </span>        <span style="color: #a0522d;">i</span> = <span style="color: #483d8b;">int</span>(msg.payload)
<span class="linenr">31: </span>
<span class="linenr">32: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr">33: </span>            <span style="color: #a0522d;">answer</span> = <span style="color: #8b2252;">"fizzbuzz"</span>
<span class="linenr">34: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr">35: </span>            <span style="color: #a0522d;">answer</span> = <span style="color: #8b2252;">"fizz"</span>
<span class="linenr">36: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">37: </span>            <span style="color: #a0522d;">answer</span> = <span style="color: #8b2252;">"buzz"</span>
<span class="linenr">38: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">39: </span>            <span style="color: #a0522d;">answer</span> = i
<span class="linenr">40: </span>
<span class="linenr">41: </span>        <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"[msg reveived] topic:"</span>, msg.topic, <span style="color: #8b2252;">"payload:"</span>, i, <span style="color: #8b2252;">"answer:"</span>, answer)
<span class="linenr">42: </span>
<span class="linenr">43: </span>
<span class="linenr">44: </span><span style="color: #b22222;">#### </span><span style="color: #b22222;">Subscriber ####</span>
<span class="linenr">45: </span>
<span class="linenr">46: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">Start thread in background that responds to messages</span>
<span class="linenr">47: </span><span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"[subscribing]"</span>)
<span class="linenr">48: </span><span style="color: #a0522d;">sub</span> = FizzbuzzSubscriber()
<span class="linenr">49: </span><span style="color: #a0522d;">th1</span> = threading.Thread(target=sub.start, daemon=<span style="color: #008b8b;">True</span>)
<span class="linenr">50: </span>th1.start()
<span class="linenr">51: </span>
<span class="linenr">52: </span><span style="color: #b22222;">#### </span><span style="color: #b22222;">Publisher ####</span>
<span class="linenr">53: </span>
<span class="linenr">54: </span><span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"[start publishing]"</span>)
<span class="linenr">55: </span><span style="color: #a0522d;">pub</span> = FizzbuzzPublisher()
<span class="linenr">56: </span><span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(1,21):
<span class="linenr">57: </span><span style="background-color: #f2f2f2;"> </span>   pub.publish(i)
<span class="linenr">58: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">waiting some time and give the subscribed client time to do the job.</span>
<span class="linenr">59: </span><span style="background-color: #f2f2f2;"> </span>   time.sleep(0.1)
<span class="linenr">60: </span>
<span class="linenr">61: </span>time.sleep(1)
</pre>
</div>

<pre class="example">
[subscribing]
[start publishing]
[publish] 1
[connected]
[publish] 2
[publish] 3
[publish] 4
[msg reveived] topic: fizzbuzz/ payload: 1 answer: 1
[msg reveived] topic: fizzbuzz/ payload: 2 answer: 2
[publish] 5
[publish] 6
[publish] 7
[publish] 8
[publish] 9
[publish] 10
[msg reveived] topic: fizzbuzz/ payload: 3 answer: fizz
[publish] 11
[msg reveived] topic: fizzbuzz/ payload: 4 answer: 4
[msg reveived] topic: fizzbuzz/ payload: 5 answer: buzz
[msg reveived] topic: fizzbuzz/ payload: 6 answer: fizz
[msg reveived] topic: fizzbuzz/ payload: 7 answer: 7
[msg reveived] topic: fizzbuzz/ payload: 8 answer: 8
[msg reveived] topic: fizzbuzz/ payload: 9 answer: fizz
[publish] 12
[msg reveived] topic: fizzbuzz/ payload: 10 answer: buzz
[publish] 13
[publish] 14
[msg reveived] topic: fizzbuzz/ payload: 11 answer: 11
[msg reveived] topic: fizzbuzz/ payload: 12 answer: fizz
[publish] 15
[msg reveived] topic: fizzbuzz/ payload: 13 answer: 13
[publish] 16
[msg reveived] topic: fizzbuzz/ payload: 14 answer: 14
[publish] 17
[publish] 18
[msg reveived] topic: fizzbuzz/ payload: 15 answer: fizzbuzz
[msg reveived] topic: fizzbuzz/ payload: 16 answer: 16
[publish] 19
[msg reveived] topic: fizzbuzz/ payload: 17 answer: 17
[publish] 20
[msg reveived] topic: fizzbuzz/ payload: 18 answer: fizz
[msg reveived] topic: fizzbuzz/ payload: 19 answer: 19
[msg reveived] topic: fizzbuzz/ payload: 20 answer: buzz
</pre>

<p>
Das obige Beispiel nutzt einen Testserver unter der Adresse
<code>iot.eclipse.org</code>. Bei github gibt es eine <a href="https://github.com/mqtt/mqtt.github.io/wiki/servers">Übersicht mit MQTT
Servern</a>.
</p>

<p>
Das folgende Beispiel verwendet das EA-Modul. 
</p>

<p>
Hierbei agiert ein Taster als Sensor, der beim Drücken in das Topic
<code>eamodul/taster0/pressed</code> eine 1 sendet. 
</p>

<p>
Eine LED agiert als Sensor, die sich beim Topic registriert und auf
Nachrichten entsprechend reagiert: Wenn die Zahl durch 3 bzw. 5
teilbar ist, geht die gelbe bzw. rote LED an, ansonsten leuchtet nur
die grüne LED.
</p>


<div class="figure">
<p><img src="doc/fizzbuzz-mqtt-eamodul.png" alt="fizzbuzz-mqtt-eamodul.png" />
</p>
</div>

<p>
Es folgt der Quelltext.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> eapi.hw
<span class="linenr"> 2: </span><span style="color: #a020f0;">import</span> paho.mqtt.client <span style="color: #a020f0;">as</span> mqtt
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">MqttModul</span>():
<span class="linenr"> 6: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, server=<span style="color: #8b2252;">"iot.eclipse.org"</span>, port=1883):
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">self</span>.num = 1
<span class="linenr"> 8: </span>        <span style="color: #a020f0;">self</span>.client = mqtt.Client()
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">self</span>.client.connect(server, port, keepalive=60)
<span class="linenr">10: </span>        <span style="color: #a020f0;">self</span>.client.on_connect = <span style="color: #a020f0;">self</span>.on_connect
<span class="linenr">11: </span>        <span style="color: #a020f0;">self</span>.client.on_message = <span style="color: #a020f0;">self</span>.on_message
<span class="linenr">12: </span>        <span style="color: #a020f0;">self</span>.client.connect(server, port, keepalive=60)
<span class="linenr">13: </span>
<span class="linenr">14: </span>        <span style="color: #a020f0;">self</span>.eamodul = eapi.hw.EAModul()
<span class="linenr">15: </span>        <span style="color: #a020f0;">self</span>.eamodul.taster_event_registrieren(0, <span style="color: #a020f0;">self</span>.taster_gedrueckt)
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">taster_gedrueckt</span>(<span style="color: #a020f0;">self</span>, pin):
<span class="linenr">18: </span>        <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"[publish]"</span>, <span style="color: #a020f0;">self</span>.num)
<span class="linenr">19: </span>        <span style="color: #a020f0;">self</span>.client.publish(<span style="color: #8b2252;">"eamodul/taster0/pressed/"</span>, 1)
<span class="linenr">20: </span>
<span class="linenr">21: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">on_connect</span>(<span style="color: #a020f0;">self</span>, client, userdata, flags, rc):
<span class="linenr">22: </span>        <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"[connected]"</span>)
<span class="linenr">23: </span>        <span style="color: #a020f0;">self</span>.client.subscribe(<span style="color: #8b2252;">"eamodul/taster0/pressed/"</span>)
<span class="linenr">24: </span>
<span class="linenr">25: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">on_message</span>(<span style="color: #a020f0;">self</span>, client, userdata, msg):
<span class="linenr">26: </span>        <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"[msg reveived] topic:"</span>, msg.topic, <span style="color: #8b2252;">"payload:"</span>, msg.payload)
<span class="linenr">27: </span>
<span class="linenr">28: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">turn off all LED rot, gelb, gr&#252;n</span>
<span class="linenr">29: </span>        <span style="color: #a020f0;">self</span>.eamodul.schalte_leds(<span style="color: #008b8b;">False</span>, <span style="color: #008b8b;">False</span>, <span style="color: #008b8b;">False</span>)
<span class="linenr">30: </span>
<span class="linenr">31: </span>        <span style="color: #a020f0;">if</span> <span style="color: #a020f0;">self</span>.num % 3 == 0 <span style="color: #a020f0;">or</span> <span style="color: #a020f0;">self</span>.num % 5 == 0:
<span class="linenr">32: </span>            <span style="color: #a020f0;">if</span> <span style="color: #a020f0;">self</span>.num % 3 == 0:
<span class="linenr">33: </span>                <span style="color: #a020f0;">self</span>.eamodul.schalte_led(eapi.hw.EAModul.LED_GELB, <span style="color: #008b8b;">True</span>)
<span class="linenr">34: </span>            <span style="color: #a020f0;">if</span> <span style="color: #a020f0;">self</span>.num % 5 == 0:
<span class="linenr">35: </span>                <span style="color: #a020f0;">self</span>.eamodul.schalte_led(eapi.hw.EAModul.LED_ROT, <span style="color: #008b8b;">True</span>)
<span class="linenr">36: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">37: </span>            <span style="color: #a020f0;">self</span>.eamodul.schalte_led(eapi.hw.EAModul.LED_GRUEN, <span style="color: #008b8b;">True</span>)
<span class="linenr">38: </span>
<span class="linenr">39: </span>        <span style="color: #a020f0;">self</span>.num += 1
<span class="linenr">40: </span>
<span class="linenr">41: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">start</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">42: </span>        <span style="color: #a020f0;">self</span>.client.loop_forever()
<span class="linenr">43: </span>
<span class="linenr">44: </span>
<span class="linenr">45: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">main</span>():
<span class="linenr">46: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">mqttmod</span> = MqttModul()
<span class="linenr">47: </span><span style="background-color: #f2f2f2;"> </span>   mqttmod.start()
<span class="linenr">48: </span>
<span class="linenr">49: </span><span style="color: #a020f0;">if</span> <span style="color: #483d8b;">__name__</span> == <span style="color: #8b2252;">"__main__"</span>:
<span class="linenr">50: </span><span style="background-color: #f2f2f2;"> </span>   main()
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-25" class="outline-2">
<h2 id="sec-25"><span class="section-number-2">25</span> Mit Kommandozeilenparametern</h2>
<div class="outline-text-2" id="text-25">
<p>
Kommandozeilenparameter stehen in <code>sys.argv</code>.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> sys
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz</span>(n):
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(n):
<span class="linenr"> 5: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr"> 6: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr"> 8: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizz"</span>)
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">10: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">11: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">12: </span>            <span style="color: #a020f0;">print</span>(i)
<span class="linenr">13: </span>
<span class="linenr">14: </span><span style="color: #a020f0;">if</span> <span style="color: #483d8b;">__name__</span> == <span style="color: #8b2252;">"__main__"</span>:
<span class="linenr">15: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"Evaluating command line:"</span>, sys.argv)
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">sys.argv contains all parameters, program name at position 0.</span>
<span class="linenr">18: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">num_arg</span> = sys.argv[1]
<span class="linenr">19: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">number</span> = <span style="color: #483d8b;">int</span>(num_arg)
<span class="linenr">20: </span>
<span class="linenr">21: </span><span style="background-color: #f2f2f2;"> </span>   fizzbuzz(number)
</pre>
</div>

<p>
Aufruf mit einem Parameter:
</p>

<div class="org-src-container">

<pre class="src src-sh">python fizzbuzz-cli.py 20
</pre>
</div>

<pre class="example">
Evaluating command line: ['fizzbuzz-cli.py', '20']
fizzbuzz
1
2
fizz
4
buzz
fizz
7
8
fizz
buzz
11
fizz
13
14
fizzbuzz
16
17
fizz
19
</pre>

<p>
Mit dem Paket <code>argparse</code>
(<a href="https://docs.python.org/3/library/argparse.html">https://docs.python.org/3/library/argparse.html</a>) wird die Auswertung
von Kommandozeilenparametern manchmal vereinfacht.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> argparse
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz</span>(n):
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(n):
<span class="linenr"> 5: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr"> 6: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr"> 8: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizz"</span>)
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">10: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">11: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">12: </span>            <span style="color: #a020f0;">print</span>(i)
<span class="linenr">13: </span>
<span class="linenr">14: </span><span style="color: #a020f0;">if</span> <span style="color: #483d8b;">__name__</span> == <span style="color: #8b2252;">"__main__"</span>:
<span class="linenr">15: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">Using class ArgumentParser to help handling parameters</span>
<span class="linenr">16: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">parser</span> = argparse.ArgumentParser(description=<span style="color: #8b2252;">"FizzBuzz Spiel"</span>)
<span class="linenr">17: </span><span style="background-color: #f2f2f2;"> </span>   parser.add_argument(<span style="color: #8b2252;">"--max_wert"</span>, <span style="color: #483d8b;">type</span>=<span style="color: #483d8b;">int</span>, default=20,
<span class="linenr">18: </span>                        <span style="color: #483d8b;">help</span>=<span style="color: #8b2252;">"Bis zu diesem Wert wird gez&#228;hlt"</span>)
<span class="linenr">19: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">args</span> = parser.parse_args()
<span class="linenr">20: </span><span style="background-color: #f2f2f2;"> </span>   fizzbuzz(args.max_wert)
</pre>
</div>

<p>
Nun steht eine Hilfe zur Verfügung:
</p>

<div class="org-src-container">

<pre class="src src-sh">python fizzbuzz-argparse.py --help
</pre>
</div>

<pre class="example">
usage: fizzbuzz-argparse.py [-h] [--max_wert MAX_WERT]

FizzBuzz Spiel

optional arguments:
  -h, --help           show this help message and exit
  --max_wert MAX_WERT  Bis zu diesem Wert wird gezählt
</pre>

<p>
Aufruf mit einem Parameter.
</p>

<div class="org-src-container">

<pre class="src src-sh">python fizzbuzz-argparse.py --max_wert 20
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-26" class="outline-2">
<h2 id="sec-26"><span class="section-number-2">26</span> Mit einer Konfigurationsdatei</h2>
<div class="outline-text-2" id="text-26">
<p>
Mit dem Paket <code>configparser</code>
(<a href="https://docs.python.org/3/library/configparser.html">https://docs.python.org/3/library/configparser.html</a>) kann eine
Konfigurationsdatei ausgewertet werden.
</p>

<p>
Die Datei <code>fizzbuzz.ini</code>:
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr">1: </span>[default]
<span class="linenr">2: </span><span style="color: #a0522d;">max_wert</span> = 20
<span class="linenr">3: </span>
<span class="linenr">4: </span>[informationen]
<span class="linenr">5: </span><span style="color: #a0522d;">beschreibung</span> = Ein Z&#228;hlspiel
</pre>
</div>

<p>
Auswerten der Datei:
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> configparser
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz</span>(n):
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(n):
<span class="linenr"> 5: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr"> 6: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr"> 8: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizz"</span>)
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">10: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">11: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">12: </span>            <span style="color: #a020f0;">print</span>(i)
<span class="linenr">13: </span>
<span class="linenr">14: </span><span style="color: #a0522d;">config</span> = configparser.ConfigParser()
<span class="linenr">15: </span>config.read(<span style="color: #8b2252;">"fizzbuzz.ini"</span>)
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="color: #a0522d;">description</span> = config[<span style="color: #8b2252;">"informationen"</span>][<span style="color: #8b2252;">"beschreibung"</span>]
<span class="linenr">18: </span><span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"Beschreibung:"</span>, description)
<span class="linenr">19: </span>
<span class="linenr">20: </span><span style="color: #a0522d;">conf_num</span> = config[<span style="color: #8b2252;">"default"</span>][<span style="color: #8b2252;">"max_wert"</span>]
<span class="linenr">21: </span><span style="color: #a0522d;">num</span> = <span style="color: #483d8b;">int</span>(conf_num)
<span class="linenr">22: </span>fizzbuzz(num)
</pre>
</div>

<pre class="example">
Beschreibung: Ein Zählspiel
fizzbuzz
1
2
fizz
4
buzz
fizz
7
8
fizz
buzz
11
fizz
13
14
fizzbuzz
16
17
fizz
19
</pre>
</div>
</div>

<div id="outline-container-sec-27" class="outline-2">
<h2 id="sec-27"><span class="section-number-2">27</span> Als Web-Service mit REST-API</h2>
<div class="outline-text-2" id="text-27">
<p>
<code>hug</code> (<a href="http://www.hug.rest/">http://www.hug.rest/</a>) stellt eine einfache Schnittstelle für
REST-Web-Services bereit.
</p>

<div class="org-src-container">

<pre class="src src-sh">pip install hug
</pre>
</div>

<p>
Ein einfacher Service wird mit der Annotation <code>@hug.get()</code>
ausgestattet.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> hug
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_results</span>(n):
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">results</span> = {}
<span class="linenr"> 5: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(n):
<span class="linenr"> 6: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr"> 7: </span>            <span style="color: #a0522d;">results</span>[i] = <span style="color: #8b2252;">"fizzbuzz"</span>
<span class="linenr"> 8: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr"> 9: </span>            <span style="color: #a0522d;">results</span>[i] = <span style="color: #8b2252;">"fizz"</span>
<span class="linenr">10: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">11: </span>            <span style="color: #a0522d;">results</span>[i] = <span style="color: #8b2252;">"buzz"</span>
<span class="linenr">12: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">13: </span>            <span style="color: #a0522d;">results</span>[i] = i
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">return</span> results
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="color: #228b22;">@hug.get</span>(<span style="color: #8b2252;">'/fizzbuzz'</span>) <span style="color: #b22222;"># </span><span style="color: #b22222;">respond to get-requests</span>
<span class="linenr">18: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_get</span>(max_number):
<span class="linenr">19: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #8b2252;">"""Return fizzbuzz up to the given number."""</span>
<span class="linenr">20: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">n</span> = <span style="color: #483d8b;">int</span>(max_number)
<span class="linenr">21: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">return</span> fizzbuzz_results(n)
</pre>
</div>

<p>
Server auf Port 8081 starten:
</p>

<div class="org-src-container">

<pre class="src src-sh">hug -p 8081 -f fizzbuzz_hug.py
</pre>
</div>

<p>
Nun kann der Web-Service abgerufen werden (für Tests z.B. mit
curl). Wenn keine korrekte URL angegeben wird, liefert hug eine Hilfe.
</p>

<div class="org-src-container">

<pre class="src src-sh">curl localhost:8081
</pre>
</div>

<pre class="example">
{
    "404": "The API call you tried to make was not defined. Here's a definition of the API to help you get going :)",
    "documentation": {
        "handlers": {
            "/fizzbuzz": {
                "GET": {
                    "usage": "Return fizzbuzz up to the given number.",
                    "outputs": {
                        "format": "JSON (Javascript Serialized Object Notation)",
                        "content_type": "application/json"
                    },
                    "inputs": {
                        "max_number": {
                            "type": "Basic text / string value"
                        }
                    }
                }
            }
        }
    }
}
</pre>

<p>
Nun mit einer bekannten URL.
</p>

<div class="org-src-container">

<pre class="src src-sh">curl localhost:8081/fizzbuzz?<span style="color: #a0522d;">max_number</span>=10
</pre>
</div>

<pre class="example">
{"0": "fizzbuzz", "1": 1, "2": 2, "3": "fizz", "4": 4, "5": "buzz", "6": "fizz", "7": 7, "8": 8, "9": "fizz"}
</pre>

<p>
Alternative mit Parameter im Request:
</p>

<div class="org-src-container">

<pre class="src src-sh">curl localhost:8081/fizzbuzz --data <span style="color: #a0522d;">max_number</span>=10 --request GET
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-28" class="outline-2">
<h2 id="sec-28"><span class="section-number-2">28</span> In einer MVC-Architektur</h2>
<div class="outline-text-2" id="text-28">

<div class="figure">
<p><img src="doc/mvc.png" alt="mvc.png" />
</p>
</div>

<p>
<a href="https://de.wikipedia.org/wiki/Model_View_Controller">Model-View-Controller-Konzept</a>. Eine durchgezogene Linie symbolisiert
eine direkte Assoziation, eine gestrichelte eine indirekte Assoziation
(zum Beispiel über einen <a href="https://de.wikipedia.org/wiki/Beobachter_(Entwurfsmuster)">Beobachter</a>).
</p>


<div class="figure">
<p><img src="doc/fizzbuzz_mvc.svg" alt="fizzbuzz_mvc.svg" />
</p>
</div>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzzModel</span>:
<span class="linenr"> 2: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr"> 3: </span>        <span style="color: #a020f0;">self</span>.results = {}
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">a list of observers that react to modifications</span>
<span class="linenr"> 6: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">they must implement a method model_changed(added_value)</span>
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">self</span>.observers = []
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">add_value</span>(<span style="color: #a020f0;">self</span>, val):        
<span class="linenr">10: </span>        <span style="color: #a020f0;">if</span> val % 3 == 0 <span style="color: #a020f0;">and</span> val % 5 == 0:
<span class="linenr">11: </span>            <span style="color: #a020f0;">self</span>.results[val] = <span style="color: #8b2252;">"fizzbuzz"</span>
<span class="linenr">12: </span>        <span style="color: #a020f0;">elif</span> val % 3 == 0:
<span class="linenr">13: </span>              <span style="color: #a020f0;">self</span>.results[val] = <span style="color: #8b2252;">"fizz"</span>
<span class="linenr">14: </span>        <span style="color: #a020f0;">elif</span> val % 5 == 0:
<span class="linenr">15: </span>            <span style="color: #a020f0;">self</span>.results[val] = <span style="color: #8b2252;">"buzz"</span>
<span class="linenr">16: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">17: </span>            <span style="color: #a020f0;">self</span>.results[val] = val
<span class="linenr">18: </span>
<span class="linenr">19: </span>        <span style="color: #a020f0;">self</span>._notify_observers(val)
<span class="linenr">20: </span>
<span class="linenr">21: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">add_observer</span>(<span style="color: #a020f0;">self</span>, observer):
<span class="linenr">22: </span>        <span style="color: #a020f0;">self</span>.observers.append(observer)
<span class="linenr">23: </span>
<span class="linenr">24: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">_notify_observers</span>(<span style="color: #a020f0;">self</span>, added_val):
<span class="linenr">25: </span>        <span style="color: #a020f0;">for</span> o <span style="color: #a020f0;">in</span> <span style="color: #a020f0;">self</span>.observers:
<span class="linenr">26: </span>            o.model_changed(added_val)
<span class="linenr">27: </span>
<span class="linenr">28: </span>
<span class="linenr">29: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzzView</span>:
<span class="linenr">30: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, model):
<span class="linenr">31: </span>        <span style="color: #a020f0;">self</span>.model = model
<span class="linenr">32: </span>
<span class="linenr">33: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">show</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">34: </span>        <span style="color: #a020f0;">for</span> r <span style="color: #a020f0;">in</span> <span style="color: #a020f0;">self</span>.model.results:
<span class="linenr">35: </span>            <span style="color: #a020f0;">print</span>(r, <span style="color: #a020f0;">self</span>.model.results[r])
<span class="linenr">36: </span>
<span class="linenr">37: </span>
<span class="linenr">38: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzzController</span>:
<span class="linenr">39: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, model, view):
<span class="linenr">40: </span>        <span style="color: #a020f0;">self</span>.model = model
<span class="linenr">41: </span>        <span style="color: #a020f0;">self</span>.model.add_observer(<span style="color: #a020f0;">self</span>)
<span class="linenr">42: </span>        <span style="color: #a020f0;">self</span>.view = view
<span class="linenr">43: </span>
<span class="linenr">44: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">add_value_to_model</span>(<span style="color: #a020f0;">self</span>, new_val):
<span class="linenr">45: </span>        <span style="color: #a020f0;">self</span>.model.add_value(new_val)
<span class="linenr">46: </span>
<span class="linenr">47: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">notify_view</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">48: </span>        <span style="color: #a020f0;">self</span>.view.model_changed()
<span class="linenr">49: </span>
<span class="linenr">50: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">model_changed</span>(<span style="color: #a020f0;">self</span>, added_value):
<span class="linenr">51: </span>        <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"[controller] model changed. Added"</span>, added_value)
<span class="linenr">52: </span>
<span class="linenr">53: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">show_view</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">54: </span>        <span style="color: #a020f0;">self</span>.view.show()
<span class="linenr">55: </span>
<span class="linenr">56: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">main</span>():
<span class="linenr">57: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">creating and connecting model, view, and controller</span>
<span class="linenr">58: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">model</span> = FizzBuzzModel()
<span class="linenr">59: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">view</span> = FizzBuzzView(model)
<span class="linenr">60: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">controller</span> = FizzBuzzController(model, view)
<span class="linenr">61: </span>
<span class="linenr">62: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"# Adding values via controller to model"</span>)
<span class="linenr">63: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(20):
<span class="linenr">64: </span>        controller.add_value_to_model(i)
<span class="linenr">65: </span>
<span class="linenr">66: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"# Showing view of the model via controller"</span>)
<span class="linenr">67: </span><span style="background-color: #f2f2f2;"> </span>   controller.show_view()
<span class="linenr">68: </span>
<span class="linenr">69: </span>
<span class="linenr">70: </span>main()
</pre>
</div>

<pre class="example">
# Adding values via controller to model
[controller] model changed. Added 0
[controller] model changed. Added 1
[controller] model changed. Added 2
[controller] model changed. Added 3
[controller] model changed. Added 4
[controller] model changed. Added 5
[controller] model changed. Added 6
[controller] model changed. Added 7
[controller] model changed. Added 8
[controller] model changed. Added 9
[controller] model changed. Added 10
[controller] model changed. Added 11
[controller] model changed. Added 12
[controller] model changed. Added 13
[controller] model changed. Added 14
[controller] model changed. Added 15
[controller] model changed. Added 16
[controller] model changed. Added 17
[controller] model changed. Added 18
[controller] model changed. Added 19
# Showing view of the model via controller
0 fizzbuzz
1 1
2 2
3 fizz
4 4
5 buzz
6 fizz
7 7
8 8
9 fizz
10 buzz
11 11
12 fizz
13 13
14 14
15 fizzbuzz
16 16
17 17
18 fizz
19 19
</pre>
</div>
</div>

<div id="outline-container-sec-29" class="outline-2">
<h2 id="sec-29"><span class="section-number-2">29</span> Als Spiel (mit pygame)</h2>
<div class="outline-text-2" id="text-29">
<p>
<code>pygame</code> (<a href="http://pygame.org/">http://pygame.org/</a>) kann mit <code>pip</code> installiert werden.
</p>

<div class="org-src-container">

<pre class="src src-sh">pip install pygame
</pre>
</div>

<p>
<img src="doc/fizzbuzz_pygame.png" alt="fizzbuzz_pygame.png" />
<img src="doc/ball.gif" alt="ball.gif" />
</p>

<p>
Bei dem folgenden Beispiel hüpft ein Ball über den Bildschirm. Bei
jedem Mausklick auf den Ball wird eine Zahl, "fizz", "buzz" oder
"fizzbuzz" auf dem Ball angezeigt.
</p>


<div class="figure">
<p><img src="doc/fizzbuzz_game.svg" alt="fizzbuzz_game.svg" />
</p>
</div>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> sys, pygame
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">Ball</span>(pygame.sprite.Sprite):
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, screen_width, screen_height):
<span class="linenr"> 5: </span>        <span style="color: #483d8b;">super</span>().__init__()
<span class="linenr"> 6: </span>        <span style="color: #a020f0;">self</span>.image = pygame.image.load(<span style="color: #8b2252;">"doc/ball.gif"</span>)
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">self</span>.rect = <span style="color: #a020f0;">self</span>.image.get_rect()
<span class="linenr"> 8: </span>        <span style="color: #a020f0;">self</span>.speed = [2, 2] <span style="color: #b22222;"># </span><span style="color: #b22222;">speed in x and y direction</span>
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">self</span>.screen_width = screen_width
<span class="linenr">10: </span>        <span style="color: #a020f0;">self</span>.screen_height = screen_height
<span class="linenr">11: </span>
<span class="linenr">12: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">update</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">13: </span>        <span style="color: #8b2252;">"""Update called by the update of the Group method."""</span>
<span class="linenr">14: </span>        <span style="color: #a020f0;">self</span>.rect = <span style="color: #a020f0;">self</span>.rect.move(<span style="color: #a020f0;">self</span>.speed)
<span class="linenr">15: </span>        <span style="color: #a020f0;">if</span> <span style="color: #a020f0;">self</span>.rect.left &lt; 0 <span style="color: #a020f0;">or</span> <span style="color: #a020f0;">self</span>.rect.right &gt; <span style="color: #a020f0;">self</span>.screen_width:
<span class="linenr">16: </span>            <span style="color: #a020f0;">self</span>.speed[0] = -<span style="color: #a020f0;">self</span>.speed[0]
<span class="linenr">17: </span>        <span style="color: #a020f0;">if</span> <span style="color: #a020f0;">self</span>.rect.top &lt; 0 <span style="color: #a020f0;">or</span> <span style="color: #a020f0;">self</span>.rect.bottom &gt; <span style="color: #a020f0;">self</span>.screen_height:
<span class="linenr">18: </span>            <span style="color: #a020f0;">self</span>.speed[1] = -<span style="color: #a020f0;">self</span>.speed[1]
<span class="linenr">19: </span>
<span class="linenr">20: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">is_clicked</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">21: </span>        <span style="color: #8b2252;">"""Check whether this Ball has been clicked."""</span>
<span class="linenr">22: </span>        <span style="color: #a0522d;">x</span>,<span style="color: #a0522d;">y</span> = pygame.mouse.get_pos()
<span class="linenr">23: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">Coordinate system starts with (0,0) at top left</span>
<span class="linenr">24: </span>        <span style="color: #a020f0;">return</span> (<span style="color: #a020f0;">self</span>.rect.left &lt; x &lt; <span style="color: #a020f0;">self</span>.rect.right <span style="color: #a020f0;">and</span>
<span class="linenr">25: </span>                <span style="color: #a020f0;">self</span>.rect.top &lt; y &lt; <span style="color: #a020f0;">self</span>.rect.bottom)
<span class="linenr">26: </span>
<span class="linenr">27: </span>
<span class="linenr">28: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzzGame</span>:
<span class="linenr">29: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, width, height):
<span class="linenr">30: </span>        pygame.init()
<span class="linenr">31: </span>
<span class="linenr">32: </span>        <span style="color: #a020f0;">self</span>.width, <span style="color: #a020f0;">self</span>.height = width, height
<span class="linenr">33: </span>        <span style="color: #a020f0;">self</span>.screen = pygame.display.set_mode((width, height))
<span class="linenr">34: </span>
<span class="linenr">35: </span>        <span style="color: #a020f0;">self</span>.ball = Ball(width, height)
<span class="linenr">36: </span>        <span style="color: #a020f0;">self</span>.font = pygame.font.SysFont(<span style="color: #8b2252;">"Arial"</span>, 16)
<span class="linenr">37: </span>
<span class="linenr">38: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz</span>(<span style="color: #a020f0;">self</span>, n):
<span class="linenr">39: </span>        <span style="color: #a020f0;">if</span> n % 3 == 0 <span style="color: #a020f0;">and</span> n % 5 == 0:
<span class="linenr">40: </span>            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizzbuzz"</span>
<span class="linenr">41: </span>        <span style="color: #a020f0;">elif</span> n % 3 == 0:
<span class="linenr">42: </span>            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizz"</span>
<span class="linenr">43: </span>        <span style="color: #a020f0;">elif</span> n % 5 == 0:
<span class="linenr">44: </span>            <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"buzz"</span>
<span class="linenr">45: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">46: </span>            <span style="color: #a020f0;">return</span> n
<span class="linenr">47: </span>
<span class="linenr">48: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">start_game_loop</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr">49: </span>        <span style="color: #a0522d;">clock</span> = pygame.time.Clock()
<span class="linenr">50: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">group all sprites (here only one)</span>
<span class="linenr">51: </span>        <span style="color: #a0522d;">allsprites</span> = pygame.sprite.Group((<span style="color: #a020f0;">self</span>.ball))
<span class="linenr">52: </span>        <span style="color: #a0522d;">number</span>, <span style="color: #a0522d;">fb_result</span> = 1, 1
<span class="linenr">53: </span>
<span class="linenr">54: </span>        <span style="color: #a020f0;">while</span> <span style="color: #008b8b;">True</span>:
<span class="linenr">55: </span>            clock.tick(60) <span style="color: #b22222;"># </span><span style="color: #b22222;">limit runtime to 60 Frames/Second</span>
<span class="linenr">56: </span>
<span class="linenr">57: </span>            <span style="color: #b22222;"># </span><span style="color: #b22222;">handle events</span>
<span class="linenr">58: </span>            <span style="color: #a020f0;">for</span> event <span style="color: #a020f0;">in</span> pygame.event.get():
<span class="linenr">59: </span>                <span style="color: #b22222;">## </span><span style="color: #b22222;">handle events ##</span>
<span class="linenr">60: </span>                <span style="color: #a020f0;">if</span> event.<span style="color: #483d8b;">type</span> == pygame.QUIT:
<span class="linenr">61: </span>                    sys.<span style="color: #008b8b;">exit</span>()
<span class="linenr">62: </span>                <span style="color: #a020f0;">elif</span> event.<span style="color: #483d8b;">type</span> == pygame.MOUSEBUTTONDOWN <span style="color: #a020f0;">and</span> <span style="color: #a020f0;">self</span>.ball.is_clicked():
<span class="linenr">63: </span>                    <span style="color: #a0522d;">number</span> += 1                    
<span class="linenr">64: </span>                    <span style="color: #a0522d;">fb_result</span> = <span style="color: #a020f0;">self</span>.fizzbuzz(number)
<span class="linenr">65: </span>
<span class="linenr">66: </span>            <span style="color: #b22222;"># </span><span style="color: #b22222;">update all Sprites</span>
<span class="linenr">67: </span>            allsprites.update()
<span class="linenr">68: </span>
<span class="linenr">69: </span>            <span style="color: #b22222;"># </span><span style="color: #b22222;">draw the screen: background, sprites, text</span>
<span class="linenr">70: </span>            <span style="color: #a020f0;">self</span>.screen.fill((0,0,0))
<span class="linenr">71: </span>            <span style="color: #b22222;"># </span><span style="color: #b22222;">for each sprite in the group draw/blit the image into a rect</span>
<span class="linenr">72: </span>            allsprites.draw(<span style="color: #a020f0;">self</span>.screen)
<span class="linenr">73: </span>            <span style="color: #b22222;"># </span><span style="color: #b22222;">draw text on top</span>
<span class="linenr">74: </span>            <span style="color: #a0522d;">fontsurf</span> = <span style="color: #a020f0;">self</span>.font.render(<span style="color: #483d8b;">str</span>(fb_result), <span style="color: #008b8b;">False</span>, (0,255,0))
<span class="linenr">75: </span>            <span style="color: #a020f0;">self</span>.screen.blit(fontsurf, <span style="color: #a020f0;">self</span>.ball.rect)                
<span class="linenr">76: </span>            <span style="color: #b22222;"># </span><span style="color: #b22222;">flip the buffer</span>
<span class="linenr">77: </span>            pygame.display.flip()
<span class="linenr">78: </span>
<span class="linenr">79: </span>
<span class="linenr">80: </span><span style="color: #a0522d;">game</span> = FizzBuzzGame(320, 240)
<span class="linenr">81: </span>game.start_game_loop()
</pre>
</div>

<p>
Weitere Informationen gibt es in einem <a href="http://pygame.org/docs/tut/PygameIntro.html">Tutorial</a>.
</p>
</div>
</div>

<div id="outline-container-sec-30" class="outline-2">
<h2 id="sec-30"><span class="section-number-2">30</span> In einem docker Container</h2>
<div class="outline-text-2" id="text-30">
<p>
Zunächst muss docker (<a href="https://www.docker.com/">https://www.docker.com/</a>) installiert werden.
</p>

<div class="org-src-container">

<pre class="src src-sh">sudo apt-get install docker.io
</pre>
</div>

<p>
Damit der lokale User auf den Dienst zugreifen kann, muss er häufig in
einer speziellen Gruppe <code>docker</code> sein.
</p>

<div class="org-src-container">

<pre class="src src-sh">sudo usermod -aG docker mein_username
</pre>
</div>

<p>
Nun erstellen wir eine Datei <code>Dockerfile</code>, aus der das docker Image gebaut
werden kann.
</p>

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #b22222;"># </span><span style="color: #b22222;">We use alpine as base image, since it has a small footprint</span>
FROM alpine

<span style="color: #b22222;"># </span><span style="color: #b22222;">apk is alpines package manager - invoked with RUN</span>
RUN apk add --no-cache python3

<span style="color: #b22222;"># </span><span style="color: #b22222;">Copy the script in the root folder</span>
COPY fizzbuzz_docker.py /

<span style="color: #b22222;"># </span><span style="color: #b22222;">Run this command when the container is started</span>
CMD [<span style="color: #8b2252;">"python3"</span>, <span style="color: #8b2252;">"/fizzbuzz_docker.py"</span>, <span style="color: #8b2252;">"20"</span>]
</pre>
</div>

<p>
Der Container kann mit diesem Script nun gebaut werden. Dafür muss man
im gleichen Verzeichnis sein, in dem sich die Dateien <code>Dockerfile</code> und
<code>fizzbuzz_docker.py</code> befinden.
</p>

<div class="org-src-container">

<pre class="src src-sh">docker build -t fizzbuzz .
</pre>
</div>

<pre class="example">
Sending build context to Docker daemon 557.1 kB
Sending build context to Docker daemon 1.114 MB
Sending build context to Docker daemon 1.671 MB
Sending build context to Docker daemon 2.228 MB
Sending build context to Docker daemon 2.785 MB
Sending build context to Docker daemon 3.342 MB
Sending build context to Docker daemon 3.899 MB
Sending build context to Docker daemon 4.456 MB
Sending build context to Docker daemon 5.014 MB
Sending build context to Docker daemon 5.571 MB
Sending build context to Docker daemon 6.128 MB
Sending build context to Docker daemon 6.685 MB
Sending build context to Docker daemon 7.242 MB
Sending build context to Docker daemon 7.799 MB
Sending build context to Docker daemon 8.356 MB
Sending build context to Docker daemon 8.913 MB
Sending build context to Docker daemon  9.47 MB
Sending build context to Docker daemon 10.03 MB
Sending build context to Docker daemon 10.58 MB
Sending build context to Docker daemon 11.14 MB
Sending build context to Docker daemon  11.7 MB
Sending build context to Docker daemon 12.26 MB
Sending build context to Docker daemon 12.81 MB
Sending build context to Docker daemon 13.37 MB
Sending build context to Docker daemon 13.93 MB
Sending build context to Docker daemon 14.48 MB
Sending build context to Docker daemon 15.04 MB
Sending build context to Docker daemon  15.6 MB
Sending build context to Docker daemon 16.15 MB
Sending build context to Docker daemon 16.71 MB
Sending build context to Docker daemon 17.27 MB
Sending build context to Docker daemon 17.83 MB
Sending build context to Docker daemon 18.38 MB
Sending build context to Docker daemon 18.94 MB
Sending build context to Docker daemon  19.5 MB
Sending build context to Docker daemon 20.05 MB
Sending build context to Docker daemon 20.61 MB
Sending build context to Docker daemon 21.17 MB
Sending build context to Docker daemon 21.73 MB
Sending build context to Docker daemon 22.28 MB
Sending build context to Docker daemon 22.84 MB
Sending build context to Docker daemon  23.4 MB
Sending build context to Docker daemon 23.95 MB
Sending build context to Docker daemon 24.51 MB
Sending build context to Docker daemon 25.07 MB
Sending build context to Docker daemon 25.62 MB
Sending build context to Docker daemon 26.18 MB
Sending build context to Docker daemon 26.74 MB
Sending build context to Docker daemon  27.3 MB
Sending build context to Docker daemon 27.85 MB
Sending build context to Docker daemon 28.41 MB
Sending build context to Docker daemon 28.97 MB
Sending build context to Docker daemon 29.52 MB
Sending build context to Docker daemon 30.08 MB
Sending build context to Docker daemon 30.64 MB
Sending build context to Docker daemon  31.2 MB
Sending build context to Docker daemon 31.75 MB
Sending build context to Docker daemon 32.31 MB
Sending build context to Docker daemon 32.87 MB
Sending build context to Docker daemon 33.42 MB
Sending build context to Docker daemon 33.98 MB
Sending build context to Docker daemon 34.54 MB
Sending build context to Docker daemon 35.09 MB
Sending build context to Docker daemon 35.65 MB
Sending build context to Docker daemon 36.21 MB
Sending build context to Docker daemon 36.77 MB
Sending build context to Docker daemon 37.32 MB
Sending build context to Docker daemon 37.88 MB
Sending build context to Docker daemon 38.44 MB
Sending build context to Docker daemon 38.99 MB
Sending build context to Docker daemon 39.55 MB
Sending build context to Docker daemon 40.11 MB
Sending build context to Docker daemon 40.67 MB
Sending build context to Docker daemon 41.22 MB
Sending build context to Docker daemon 41.48 MB

Step 1 : FROM alpine
 ---&gt; 4a415e366388
Step 2 : RUN apk add --no-cache python3
 ---&gt; Using cache
 ---&gt; 515104198264
Step 3 : COPY fizzbuzz_docker.py /
 ---&gt; 11088b4c74df
Removing intermediate container 7e3eda2412a3
Step 4 : CMD python3 /fizzbuzz_docker.py 20
 ---&gt; Running in b83807219cdc
 ---&gt; 45468e2e8f88
Removing intermediate container b83807219cdc
Successfully built 45468e2e8f88
</pre>

<p>
Die in dem Dockerfile referenzierte Datei <code>fizzbuzz_docker.py</code> hat
folgenden Inhalt.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> sys
<span class="linenr"> 2: </span><span style="color: #a020f0;">import</span> os
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz</span>(n):
<span class="linenr"> 5: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">if</span> n % 3 == 0 <span style="color: #a020f0;">and</span> n % 5 == 0:
<span class="linenr"> 6: </span>        <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizzbuzz"</span>
<span class="linenr"> 7: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">elif</span> n % 3 == 0:
<span class="linenr"> 8: </span>        <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizz"</span>
<span class="linenr"> 9: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">elif</span> n % 5 == 0:
<span class="linenr">10: </span>        <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"buzz"</span>
<span class="linenr">11: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">else</span>:
<span class="linenr">12: </span>        <span style="color: #a020f0;">return</span> n
<span class="linenr">13: </span>
<span class="linenr">14: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">determine parameter for fizzbuzz: environment variable, commandline,</span>
<span class="linenr">15: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">or default value.</span>
<span class="linenr">16: </span><span style="color: #a020f0;">if</span> <span style="color: #8b2252;">"FIZZBUZZ"</span> <span style="color: #a020f0;">in</span> os.environ:
<span class="linenr">17: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"[using environment variable as parameter]"</span>)
<span class="linenr">18: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">n</span> = os.environ[<span style="color: #8b2252;">"FIZZBUZZ"</span>]
<span class="linenr">19: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">n</span> = <span style="color: #483d8b;">int</span>(n)    
<span class="linenr">20: </span><span style="color: #a020f0;">elif</span> <span style="color: #483d8b;">len</span>(sys.argv) &gt; 1:
<span class="linenr">21: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"[using command line parameter]"</span>)
<span class="linenr">22: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">n</span> = <span style="color: #483d8b;">int</span>(sys.argv[1])
<span class="linenr">23: </span><span style="color: #a020f0;">else</span>:
<span class="linenr">24: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"[using default value as parameter]"</span>)
<span class="linenr">25: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">n</span> = 20   
<span class="linenr">26: </span>
<span class="linenr">27: </span><span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(n):
<span class="linenr">28: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">print</span>(fizzbuzz(i))
</pre>
</div>

<p>
Wie prüfen, ob das Containerimage korrekt angelegt wurde.
</p>

<div class="org-src-container">

<pre class="src src-sh">docker images fizzbuzz
</pre>
</div>

<pre class="example">
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
fizzbuzz            latest              cf7d486f6a37        22 hours ago        60.58 MB
</pre>

<p>
Nun kann der Container gestartet werden. Mit der Option <code>--rm</code> wird
der Container nach Beendigung der Ausführung direkt gelöscht.
Gewöhnlich sollen Container ja länger laufen und einen Dienst
bereitstellen. Das oben erstellte Image bleibt jedoch erhalten.
</p>

<div class="org-src-container">

<pre class="src src-sh">docker run --rm fizzbuzz
</pre>
</div>

<pre class="example">
[using command line parameter]
fizzbuzz
1
2
fizz
4
buzz
fizz
7
8
fizz
buzz
11
fizz
13
14
fizzbuzz
16
17
fizz
19
</pre>

<p>
Es können auch Parameter direkt übergeben werden.
</p>

<div class="org-src-container">

<pre class="src src-sh">docker run --rm fizzbuzz /usr/bin/python3 /fizzbuzz_docker.py 10
</pre>
</div>

<pre class="example">
[using command line parameter]
fizzbuzz
1
2
fizz
4
buzz
fizz
7
8
fizz
</pre>

<p>
Nun übergeben wir keinen Parameter.
</p>

<div class="org-src-container">

<pre class="src src-sh">docker run --rm fizzbuzz /usr/bin/python3 /fizzbuzz_docker.py
</pre>
</div>

<pre class="example">
[using default value as parameter]
fizzbuzz
1
2
fizz
4
buzz
fizz
7
8
fizz
buzz
11
fizz
13
14
fizzbuzz
16
17
fizz
19
</pre>

<p>
Auch eine Umgebungsvariable kann mit der Option <code>-e &lt;VARIABLE&gt;=&lt;WERT&gt;</code>
an den Container übergeben werden.
</p>

<div class="org-src-container">

<pre class="src src-sh">docker run --rm -e <span style="color: #a0522d;">FIZZBUZZ</span>=8 fizzbuzz
</pre>
</div>

<pre class="example">
[using environment variable as parameter]
fizzbuzz
1
2
fizz
4
buzz
fizz
7
</pre>

<p>
Wenn das Image nicht mehr benötigt wird, kann es wieder gelöscht
werden.
</p>

<div class="org-src-container">

<pre class="src src-sh">docker rmi fizzbuzz
</pre>
</div>

<pre class="example">
Untagged: fizzbuzz:latest
Deleted: sha256:6fe92919b9068f38cf7e4a4f5cd9fd0d6fc4c69f280e3c82668e4cd6d0edc539
Deleted: sha256:5ddf7803d3884e39ea8517e3fb1a2200fdf9182726dcd06c1336938e0ddb89ae
Deleted: sha256:26d94ce55f7cd7c4d84b4bdb6d64d114cac80b07b775e7420ddc81ab8d471ac2
</pre>
</div>
</div>
<div id="outline-container-sec-31" class="outline-2">
<h2 id="sec-31"><span class="section-number-2">31</span> Mit Fehlerbehandlung</h2>
<div class="outline-text-2" id="text-31">
<p>
<a href="https://docs.python.org/3/tutorial/errors.html">Errors und Exceptions</a> in Python.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzzException</span>(<span style="color: #228b22;">Exception</span>):
<span class="linenr"> 2: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #8b2252;">"""An exception for the FizzBuzz game."""</span>
<span class="linenr"> 3: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, errormessage, val):
<span class="linenr"> 4: </span>        <span style="color: #8b2252;">"""Create the exception with the given message and the problematic value."""</span>
<span class="linenr"> 5: </span>        <span style="color: #a020f0;">self</span>.errormessage = errormessage
<span class="linenr"> 6: </span>        <span style="color: #a020f0;">self</span>.value = val
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzBuzzSpiel</span>:
<span class="linenr"> 9: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz</span>(<span style="color: #a020f0;">self</span>, i):
<span class="linenr">10: </span>        <span style="color: #a020f0;">if</span> i &lt; 0:
<span class="linenr">11: </span>            <span style="color: #b22222;"># </span><span style="color: #b22222;">Raise an Exception and stop execution if the parameter is negative</span>
<span class="linenr">12: </span>            <span style="color: #a020f0;">raise</span> FizzBuzzException(<span style="color: #8b2252;">"Das Argument muss positiv sein!"</span>, i)
<span class="linenr">13: </span>
<span class="linenr">14: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr">15: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr">16: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr">17: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizz"</span>)
<span class="linenr">18: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">19: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">20: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">21: </span>            <span style="color: #a020f0;">print</span>(i)
<span class="linenr">22: </span>
<span class="linenr">23: </span>
<span class="linenr">24: </span><span style="color: #a0522d;">fb</span> = FizzBuzzSpiel()
<span class="linenr">25: </span><span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(-5, 5):
<span class="linenr">26: </span>
<span class="linenr">27: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">trying to run the code</span>
<span class="linenr">28: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">try</span>:
<span class="linenr">29: </span>        <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"Probiere"</span>, i)
<span class="linenr">30: </span>        fb.fizzbuzz(i)
<span class="linenr">31: </span>
<span class="linenr">32: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">except</span> FizzBuzzException <span style="color: #a020f0;">as</span> ex:
<span class="linenr">33: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">Whenever an exception is raised, jump to this code block</span>
<span class="linenr">34: </span>        <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"[Fehler]"</span>, ex.errormessage, ex.value)
</pre>
</div>

<pre class="example">
Probiere -5
[Fehler] Das Argument muss positiv sein! -5
Probiere -4
[Fehler] Das Argument muss positiv sein! -4
Probiere -3
[Fehler] Das Argument muss positiv sein! -3
Probiere -2
[Fehler] Das Argument muss positiv sein! -2
Probiere -1
[Fehler] Das Argument muss positiv sein! -1
Probiere 0
fizzbuzz
Probiere 1
1
Probiere 2
2
Probiere 3
fizz
Probiere 4
4
</pre>
</div>
</div>

<div id="outline-container-sec-32" class="outline-2">
<h2 id="sec-32"><span class="section-number-2">32</span> Mit einem neuronalen Netzwerk</h2>
<div class="outline-text-2" id="text-32">
<p>
Der Artikel <a href="http://natureofcode.com/book/chapter-10-neural-networks/">Neural Networks</a> beschreibt die Funktionsweise eines
neuronalen Netzwerkes. Das folgende neuronale Netz, soll das
fizzbuzz-Problem lösen.
</p>


<div class="figure">
<p><img src="doc/fizzbuzz_neuralnet.svg" alt="fizzbuzz_neuralnet.svg" />
</p>
</div>

<p>
Hierfür wird ein Netwerk aus 23 Perceptrons erstellt: 20 davon bilden
die Zahlen 0-19 ab, die restlichen drei die Fällen <code>fizz</code>, <code>buzz</code> und
<code>fizzbuzz</code>. Ein Input <code>i</code> wird kodiert, indem die Zahl am Eingang <code>i</code>
auf 1, an allen anderen Eingängen auf -1 gelegt wird. Zum Schluss wird
das Perceptron mit dem höchsten Wert gewählt. Das Netzwerk wird in
immer mehr Trainingsrunden verbessert.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr">  1: </span><span style="color: #a020f0;">import</span> random
<span class="linenr">  2: </span>
<span class="linenr">  3: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">Perceptron</span>:
<span class="linenr">  4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, num_inputs):
<span class="linenr">  5: </span>        <span style="color: #a020f0;">self</span>.c = 0.01 <span style="color: #b22222;"># </span><span style="color: #b22222;">coefficient that determines learning speed.</span>
<span class="linenr">  6: </span>
<span class="linenr">  7: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">random values weights in [-1;+1]</span>
<span class="linenr">  8: </span>        <span style="color: #a020f0;">self</span>.weights = [random.randint(-100,100)/100 <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(num_inputs)]
<span class="linenr">  9: </span>
<span class="linenr"> 10: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">feedforward</span>(<span style="color: #a020f0;">self</span>, inputs):
<span class="linenr"> 11: </span>        <span style="color: #8b2252;">"""Ask a trained perceptron for output on given input."""</span>
<span class="linenr"> 12: </span>        <span style="color: #a020f0;">assert</span> <span style="color: #483d8b;">len</span>(<span style="color: #a020f0;">self</span>.weights) == <span style="color: #483d8b;">len</span>(inputs)
<span class="linenr"> 13: </span>
<span class="linenr"> 14: </span>        <span style="color: #483d8b;">sum</span> = 0        
<span class="linenr"> 15: </span>        <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(<span style="color: #483d8b;">len</span>(<span style="color: #a020f0;">self</span>.weights)):
<span class="linenr"> 16: </span>            <span style="color: #483d8b;">sum</span> += inputs[i] * <span style="color: #a020f0;">self</span>.weights[i]
<span class="linenr"> 17: </span>
<span class="linenr"> 18: </span>        <span style="color: #a020f0;">return</span> <span style="color: #a020f0;">self</span>.activate(<span style="color: #483d8b;">sum</span>)
<span class="linenr"> 19: </span>
<span class="linenr"> 20: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">activate</span>(<span style="color: #a020f0;">self</span>, <span style="color: #483d8b;">sum</span>):
<span class="linenr"> 21: </span>        <span style="color: #8b2252;">"""Activation function determines when the perceptron fires - if output is positive."""</span>
<span class="linenr"> 22: </span>        <span style="color: #a020f0;">if</span> <span style="color: #483d8b;">sum</span> &gt; 0:
<span class="linenr"> 23: </span>            <span style="color: #a020f0;">return</span> +1
<span class="linenr"> 24: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr"> 25: </span>            <span style="color: #a020f0;">return</span> -1
<span class="linenr"> 26: </span>
<span class="linenr"> 27: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">train</span>(<span style="color: #a020f0;">self</span>, inputs, desired):
<span class="linenr"> 28: </span>        <span style="color: #8b2252;">"""Train for inputs and desired result."""</span>
<span class="linenr"> 29: </span>        <span style="color: #a020f0;">assert</span> <span style="color: #483d8b;">len</span>(inputs) == <span style="color: #483d8b;">len</span>(<span style="color: #a020f0;">self</span>.weights)
<span class="linenr"> 30: </span>
<span class="linenr"> 31: </span>        <span style="color: #a0522d;">guess</span> = <span style="color: #a020f0;">self</span>.feedforward(inputs)
<span class="linenr"> 32: </span>        <span style="color: #a0522d;">error</span> = desired - guess
<span class="linenr"> 33: </span>
<span class="linenr"> 34: </span>        <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(<span style="color: #483d8b;">len</span>(<span style="color: #a020f0;">self</span>.weights)):
<span class="linenr"> 35: </span>            <span style="color: #a020f0;">self</span>.weights[i] += <span style="color: #a020f0;">self</span>.c * error * inputs[i]
<span class="linenr"> 36: </span>
<span class="linenr"> 37: </span>
<span class="linenr"> 38: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">NeuralNetwork</span>:
<span class="linenr"> 39: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, num_inputs, num_outputs):
<span class="linenr"> 40: </span>        <span style="color: #8b2252;">"""Create a neural network of perceptrons. </span>
<span class="linenr"> 41: </span>
<span class="linenr"> 42: </span><span style="color: #8b2252;">        num_inputs denotes the number of inputs per Perceptron, while</span>
<span class="linenr"> 43: </span><span style="color: #8b2252;">        num_outputs denotes the number of perceptrons and therefore</span>
<span class="linenr"> 44: </span><span style="color: #8b2252;">        the number of outputs.</span>
<span class="linenr"> 45: </span><span style="color: #8b2252;">        """</span>
<span class="linenr"> 46: </span>        <span style="color: #a020f0;">self</span>.ptrons = []
<span class="linenr"> 47: </span>        <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(num_outputs):
<span class="linenr"> 48: </span>            <span style="color: #a020f0;">self</span>.ptrons.append(Perceptron(num_inputs))            
<span class="linenr"> 49: </span>
<span class="linenr"> 50: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">train</span>(<span style="color: #a020f0;">self</span>, inputs, desired_outputs):
<span class="linenr"> 51: </span>        <span style="color: #8b2252;">"""Train the network by training all perceptrons in it."""</span>
<span class="linenr"> 52: </span>        <span style="color: #a020f0;">assert</span> <span style="color: #483d8b;">len</span>(inputs) == <span style="color: #a020f0;">self</span>.num_inputs()
<span class="linenr"> 53: </span>        <span style="color: #a020f0;">assert</span> <span style="color: #483d8b;">len</span>(desired_outputs) == <span style="color: #a020f0;">self</span>.num_outputs()
<span class="linenr"> 54: </span>
<span class="linenr"> 55: </span>        <span style="color: #a020f0;">for</span> pi <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(<span style="color: #483d8b;">len</span>(<span style="color: #a020f0;">self</span>.ptrons)):
<span class="linenr"> 56: </span>            <span style="color: #a020f0;">self</span>.ptrons[pi].train(inputs, desired_outputs[pi])
<span class="linenr"> 57: </span>
<span class="linenr"> 58: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">ask</span>(<span style="color: #a020f0;">self</span>, inputs):
<span class="linenr"> 59: </span>        <span style="color: #8b2252;">"""Ask the network for an answer. It will return the index and value</span>
<span class="linenr"> 60: </span><span style="color: #8b2252;">        of the perceptron with the maximum value.</span>
<span class="linenr"> 61: </span><span style="color: #8b2252;">        """</span>
<span class="linenr"> 62: </span>        <span style="color: #a0522d;">answers</span> = []
<span class="linenr"> 63: </span>        <span style="color: #a020f0;">for</span> p <span style="color: #a020f0;">in</span> <span style="color: #a020f0;">self</span>.ptrons:
<span class="linenr"> 64: </span>            <span style="color: #a0522d;">a</span> = p.feedforward(inputs)
<span class="linenr"> 65: </span>            answers.append(a)
<span class="linenr"> 66: </span>
<span class="linenr"> 67: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">determine maximum output value</span>
<span class="linenr"> 68: </span>        <span style="color: #a0522d;">maxval</span> = [0, answers[0]]
<span class="linenr"> 69: </span>        <span style="color: #a020f0;">for</span> (i,a) <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">enumerate</span>(answers):
<span class="linenr"> 70: </span>            <span style="color: #a020f0;">if</span> a &gt; maxval[1]:
<span class="linenr"> 71: </span>                <span style="color: #a0522d;">maxval</span> = [i, a]
<span class="linenr"> 72: </span>
<span class="linenr"> 73: </span>        <span style="color: #a020f0;">return</span> maxval
<span class="linenr"> 74: </span>
<span class="linenr"> 75: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">num_inputs</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr"> 76: </span>        <span style="color: #a020f0;">assert</span> <span style="color: #483d8b;">len</span>(<span style="color: #a020f0;">self</span>.ptrons) &gt; 0
<span class="linenr"> 77: </span>
<span class="linenr"> 78: </span>        <span style="color: #a020f0;">return</span> <span style="color: #483d8b;">len</span>(<span style="color: #a020f0;">self</span>.ptrons[0].weights)
<span class="linenr"> 79: </span>
<span class="linenr"> 80: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">num_outputs</span>(<span style="color: #a020f0;">self</span>):
<span class="linenr"> 81: </span>        <span style="color: #a020f0;">return</span> <span style="color: #483d8b;">len</span>(<span style="color: #a020f0;">self</span>.ptrons)
<span class="linenr"> 82: </span>
<span class="linenr"> 83: </span>
<span class="linenr"> 84: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzbuzzNetwork</span>(NeuralNetwork):
<span class="linenr"> 85: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>, numbers):
<span class="linenr"> 86: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">adding 3 outputs for fizz, buzz and fizzbuzz</span>
<span class="linenr"> 87: </span>        <span style="color: #483d8b;">super</span>().__init__(numbers, numbers+3)
<span class="linenr"> 88: </span>
<span class="linenr"> 89: </span>        <span style="color: #a020f0;">self</span>.numbers = numbers
<span class="linenr"> 90: </span>        <span style="color: #a020f0;">self</span>.fizz = numbers
<span class="linenr"> 91: </span>        <span style="color: #a020f0;">self</span>.buzz = numbers + 1
<span class="linenr"> 92: </span>        <span style="color: #a020f0;">self</span>.fizzbuzz = numbers + 2
<span class="linenr"> 93: </span>
<span class="linenr"> 94: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">train_rounds</span>(<span style="color: #a020f0;">self</span>, training_rounds):
<span class="linenr"> 95: </span>        <span style="color: #a020f0;">for</span> _ <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(training_rounds):
<span class="linenr"> 96: </span>            <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(<span style="color: #a020f0;">self</span>.numbers):
<span class="linenr"> 97: </span>                <span style="color: #a0522d;">inputs</span> = <span style="color: #a020f0;">self</span>.encode_input(i)
<span class="linenr"> 98: </span>
<span class="linenr"> 99: </span>                <span style="color: #b22222;"># </span><span style="color: #b22222;">answer a is 1 for the right perceptron, -1 otherwise</span>
<span class="linenr">100: </span>                <span style="color: #a0522d;">outputs</span> = [-1] * (<span style="color: #a020f0;">self</span>.numbers + 3)
<span class="linenr">101: </span>                <span style="color: #a020f0;">if</span> i%3==0 <span style="color: #a020f0;">and</span> i%5==0:                
<span class="linenr">102: </span>                    <span style="color: #a0522d;">outputs</span>[<span style="color: #a020f0;">self</span>.fizzbuzz] = 1
<span class="linenr">103: </span>                <span style="color: #a020f0;">elif</span> i%3==0:
<span class="linenr">104: </span>                    <span style="color: #a0522d;">outputs</span>[<span style="color: #a020f0;">self</span>.fizz] = 1
<span class="linenr">105: </span>                <span style="color: #a020f0;">elif</span> i%5==0:
<span class="linenr">106: </span>                    <span style="color: #a0522d;">outputs</span>[<span style="color: #a020f0;">self</span>.buzz] = 1
<span class="linenr">107: </span>                <span style="color: #a020f0;">else</span>:
<span class="linenr">108: </span>                    <span style="color: #a0522d;">outputs</span>[i] = 1
<span class="linenr">109: </span>
<span class="linenr">110: </span>                <span style="color: #a020f0;">self</span>.train(inputs, outputs)
<span class="linenr">111: </span>
<span class="linenr">112: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">encode_input</span>(<span style="color: #a020f0;">self</span>, num):
<span class="linenr">113: </span>        <span style="color: #a020f0;">assert</span> num &lt; <span style="color: #a020f0;">self</span>.numbers
<span class="linenr">114: </span>
<span class="linenr">115: </span>        <span style="color: #a0522d;">inputs</span> = [0] * <span style="color: #a020f0;">self</span>.numbers
<span class="linenr">116: </span>        <span style="color: #a0522d;">inputs</span>[num] = 1
<span class="linenr">117: </span>        <span style="color: #a020f0;">return</span> inputs
<span class="linenr">118: </span>
<span class="linenr">119: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">ask</span>(<span style="color: #a020f0;">self</span>, inputs):
<span class="linenr">120: </span>        <span style="color: #a0522d;">idx</span>, <span style="color: #a0522d;">value</span> = <span style="color: #483d8b;">super</span>().ask(inputs)
<span class="linenr">121: </span>
<span class="linenr">122: </span>        <span style="color: #a020f0;">if</span> idx == <span style="color: #a020f0;">self</span>.fizz:
<span class="linenr">123: </span>            <span style="color: #a0522d;">idx</span> = <span style="color: #8b2252;">"fizz"</span>
<span class="linenr">124: </span>        <span style="color: #a020f0;">elif</span> idx == <span style="color: #a020f0;">self</span>.buzz:
<span class="linenr">125: </span>            <span style="color: #a0522d;">idx</span> = <span style="color: #8b2252;">"buzz"</span>
<span class="linenr">126: </span>        <span style="color: #a020f0;">elif</span> idx == <span style="color: #a020f0;">self</span>.fizzbuzz:
<span class="linenr">127: </span>            <span style="color: #a0522d;">idx</span> = <span style="color: #8b2252;">"fizzbuzz"</span>
<span class="linenr">128: </span>
<span class="linenr">129: </span>        <span style="color: #a020f0;">return</span> idx, value
<span class="linenr">130: </span>
<span class="linenr">131: </span>
<span class="linenr">132: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_nn</span>():
<span class="linenr">133: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">numbers</span> = 20    
<span class="linenr">134: </span>
<span class="linenr">135: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">training the network several times</span>
<span class="linenr">136: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> rounds <span style="color: #a020f0;">in</span> [10, 45, 100]:
<span class="linenr">137: </span>        <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"training"</span>, rounds, <span style="color: #8b2252;">"rounds"</span>)
<span class="linenr">138: </span>
<span class="linenr">139: </span>        <span style="color: #a0522d;">nn</span> = FizzbuzzNetwork(numbers)
<span class="linenr">140: </span>        nn.train_rounds(rounds)
<span class="linenr">141: </span>
<span class="linenr">142: </span>        <span style="color: #b22222;"># </span><span style="color: #b22222;">asking the trained network</span>
<span class="linenr">143: </span>        <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(numbers):
<span class="linenr">144: </span>            <span style="color: #a0522d;">inputs</span> = nn.encode_input(i)        
<span class="linenr">145: </span>            <span style="color: #a0522d;">idx</span>, <span style="color: #a0522d;">answer</span> = nn.ask(inputs)
<span class="linenr">146: </span>            <span style="color: #a020f0;">print</span>(i, idx)
<span class="linenr">147: </span>
<span class="linenr">148: </span>
<span class="linenr">149: </span>fizzbuzz_nn()
</pre>
</div>

<pre class="example">
training 10 rounds
0 0
1 0
2 5
3 2
4 0
5 4
6 3
7 0
8 1
9 8
10 0
11 2
12 4
13 0
14 1
15 0
16 0
17 0
18 0
19 3
training 45 rounds
0 1
1 16
2 1
3 fizz
4 4
5 7
6 2
7 0
8 8
9 6
10 buzz
11 8
12 fizz
13 7
14 14
15 fizzbuzz
16 16
17 16
18 1
19 19
training 100 rounds
0 fizzbuzz
1 1
2 2
3 fizz
4 4
5 buzz
6 fizz
7 7
8 8
9 fizz
10 buzz
11 11
12 fizz
13 13
14 14
15 fizzbuzz
16 16
17 17
18 fizz
19 19
</pre>
</div>
</div>

<div id="outline-container-sec-33" class="outline-2">
<h2 id="sec-33"><span class="section-number-2">33</span> Mit logging in ein logfile</h2>
<div class="outline-text-2" id="text-33">
<p>
Logging wird in Python über das gleichnamige Modul <a href="https://docs.python.org/3/library/logging.html">logging</a> realisiert.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> logging
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #a020f0;">class</span> <span style="color: #228b22;">FizzbuzzLogged</span>:
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">__init__</span>(<span style="color: #a020f0;">self</span>):        
<span class="linenr"> 5: </span>        logging.info(<span style="color: #8b2252;">"Logger initialized!"</span>)
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz</span>(<span style="color: #a020f0;">self</span>, i):
<span class="linenr"> 8: </span>        <span style="color: #a020f0;">if</span> i &lt; 0:
<span class="linenr"> 9: </span>            logging.warn(<span style="color: #8b2252;">"ignoring %s"</span>, i)
<span class="linenr">10: </span>            <span style="color: #a020f0;">return</span>
<span class="linenr">11: </span>
<span class="linenr">12: </span>        logging.info(<span style="color: #8b2252;">"value %s"</span>, i)
<span class="linenr">13: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr">14: </span>            logging.info(<span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr">15: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr">16: </span>            logging.info(<span style="color: #8b2252;">"fizz"</span>)
<span class="linenr">17: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">18: </span>            logging.info(<span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">19: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">20: </span>            logging.info(i)
<span class="linenr">21: </span>
<span class="linenr">22: </span>
<span class="linenr">23: </span><span style="color: #a020f0;">if</span> <span style="color: #483d8b;">__name__</span> == <span style="color: #8b2252;">"__main__"</span>:
<span class="linenr">24: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">configuring logging: using log-level DEBUG and above</span>
<span class="linenr">25: </span><span style="background-color: #f2f2f2;"> </span>   logging.basicConfig(filename=<span style="color: #8b2252;">"fizzbuzz.log"</span>, level=logging.DEBUG)
<span class="linenr">26: </span>
<span class="linenr">27: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">fb</span> = FizzbuzzLogged()
<span class="linenr">28: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(-5, 20):
<span class="linenr">29: </span>        fb.fizzbuzz(i)
</pre>
</div>

<p>
Das Programm schreibt Ausgaben nun in ein Logfile:
</p>

<div class="org-src-container">

<pre class="src src-sh">INFO:root:Logger initialized!
WARNING:root:ignoring -5
WARNING:root:ignoring -4
WARNING:root:ignoring -3
WARNING:root:ignoring -2
WARNING:root:ignoring -1
INFO:root:value 0
INFO:root:fizzbuzz
INFO:root:value 1
INFO:root:1
INFO:root:value 2
INFO:root:2
INFO:root:value 3
INFO:root:fizz
INFO:root:value 4
INFO:root:4
INFO:root:value 5
INFO:root:buzz
INFO:root:value 6
INFO:root:fizz
INFO:root:value 7
INFO:root:7
INFO:root:value 8
INFO:root:8
INFO:root:value 9
INFO:root:fizz
INFO:root:value 10
INFO:root:buzz
INFO:root:value 11
INFO:root:11
INFO:root:value 12
INFO:root:fizz
INFO:root:value 13
INFO:root:13
INFO:root:value 14
INFO:root:14
INFO:root:value 15
INFO:root:fizzbuzz
INFO:root:value 16
INFO:root:16
INFO:root:value 17
INFO:root:17
INFO:root:value 18
INFO:root:fizz
INFO:root:value 19
INFO:root:19
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-34" class="outline-2">
<h2 id="sec-34"><span class="section-number-2">34</span> Mit einem Profiler</h2>
<div class="outline-text-2" id="text-34">
<p>
Python-Programme können mit dem Paket <a href="https://docs.python.org/3/library/profile.html">profile</a> auf ihre Geschwindigkeit
untersucht werden.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> cProfile
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz_method</span>(n):
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> i <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(n):
<span class="linenr"> 5: </span>        <span style="color: #a020f0;">if</span> i % 3 == 0 <span style="color: #a020f0;">and</span> i % 5 == 0:
<span class="linenr"> 6: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizzbuzz"</span>)
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">elif</span> i % 3 == 0:
<span class="linenr"> 8: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"fizz"</span>)
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">elif</span> i % 5 == 0:
<span class="linenr">10: </span>            <span style="color: #a020f0;">print</span>(<span style="color: #8b2252;">"buzz"</span>)
<span class="linenr">11: </span>        <span style="color: #a020f0;">else</span>:
<span class="linenr">12: </span>            <span style="color: #a020f0;">print</span>(i)
<span class="linenr">13: </span>
<span class="linenr">14: </span><span style="color: #a020f0;">if</span> <span style="color: #483d8b;">__name__</span> == <span style="color: #8b2252;">"__main__"</span>:
<span class="linenr">15: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">running the profiler for the given method invocation</span>
<span class="linenr">16: </span><span style="background-color: #f2f2f2;"> </span>   cProfile.run(<span style="color: #8b2252;">"fizzbuzz_method(20)"</span>)
</pre>
</div>

<pre class="example">
fizzbuzz
1
2
fizz
4
buzz
fizz
7
8
fizz
buzz
11
fizz
13
14
fizzbuzz
16
17
fizz
19
         24 function calls in 0.000 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.000    0.000 &lt;stdin&gt;:3(fizzbuzz_method)
        1    0.000    0.000    0.000    0.000 &lt;string&gt;:1(&lt;module&gt;)
        1    0.000    0.000    0.000    0.000 {built-in method builtins.exec}
       20    0.000    0.000    0.000    0.000 {built-in method builtins.print}
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
</pre>

<p>
Das Ergebnis fasst die Zeiten für jeden Funktionsaufruf zusammen. 
</p>

<ul class="org-ul">
<li><code>ncalls</code> ist die Anzahl der Aufrufe.
</li>
<li><code>totime</code> ist die Gesamtzeit in der Methode (ohne Aufrufe von
Unterfunktionen).
</li>
<li><code>percall</code> ist der Quotient aus <code>totime</code> und <code>ncalls</code>.
</li>
<li><code>cumtime</code> ist die aufsummierte Zeit, die insgesamt von der Funktion
benötigt wurde.
</li>
<li><code>percall</code> ist der Quotient aus <code>cumtime</code> und der Aufrufe von
primitiven Funktionen.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-35" class="outline-2">
<h2 id="sec-35"><span class="section-number-2">35</span> Mit einer geplotteten Visualisierung</h2>
<div class="outline-text-2" id="text-35">
<p>
Zur Visualisierung von Daten hat sich für Python die Bibliothek
<a href="https://matplotlib.org">matplotlib</a> etabliert. In dem folgenden Beispiel wird die
fizzbuzz-Methode benutzt, um einen Datenpunkt (x|y) an jeder Stelle zu
setzen, wo die Methode einen Wert y zurückgibt. Das Ergebnis wird in
einer Datei abgespeichert.
</p>

<div class="org-src-container">

<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #a020f0;">import</span> matplotlib.pyplot <span style="color: #a020f0;">as</span> plt
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">fizzbuzz</span>(n):
<span class="linenr"> 4: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">if</span> n % 3 == 0 <span style="color: #a020f0;">and</span> n % 5 == 0:
<span class="linenr"> 5: </span>        <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizzbuzz"</span>
<span class="linenr"> 6: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">elif</span> n % 3 == 0:
<span class="linenr"> 7: </span>        <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"fizz"</span>
<span class="linenr"> 8: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">elif</span> n % 5 == 0:
<span class="linenr"> 9: </span>        <span style="color: #a020f0;">return</span> <span style="color: #8b2252;">"buzz"</span>
<span class="linenr">10: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">else</span>:    
<span class="linenr">11: </span>        <span style="color: #a020f0;">return</span> n
<span class="linenr">12: </span>
<span class="linenr">13: </span><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">main</span>():
<span class="linenr">14: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">xs</span> = []
<span class="linenr">15: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a0522d;">ys</span> = []
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #a020f0;">for</span> x <span style="color: #a020f0;">in</span> <span style="color: #483d8b;">range</span>(100):
<span class="linenr">18: </span>        <span style="color: #a0522d;">res</span> = fizzbuzz(x)
<span class="linenr">19: </span>        <span style="color: #a020f0;">if</span> <span style="color: #483d8b;">isinstance</span>(res, <span style="color: #483d8b;">int</span>):
<span class="linenr">20: </span>            <span style="color: #b22222;"># </span><span style="color: #b22222;">the result was a number - not 'fizz', 'buzz' or 'fizzbuzz'.</span>
<span class="linenr">21: </span>            xs.append(x)
<span class="linenr">22: </span>            ys.append(res)
<span class="linenr">23: </span>
<span class="linenr">24: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">clear all figures</span>
<span class="linenr">25: </span><span style="background-color: #f2f2f2;"> </span>   plt.clf()
<span class="linenr">26: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">turn on the grid and set title</span>
<span class="linenr">27: </span><span style="background-color: #f2f2f2;"> </span>   plt.grid(<span style="color: #008b8b;">True</span>)
<span class="linenr">28: </span><span style="background-color: #f2f2f2;"> </span>   plt.title(<span style="color: #8b2252;">"Fizzbuzz"</span>)
<span class="linenr">29: </span><span style="background-color: #f2f2f2;"> </span>   <span style="color: #b22222;"># </span><span style="color: #b22222;">create a plot made of x and y values and save as image</span>
<span class="linenr">30: </span><span style="background-color: #f2f2f2;"> </span>   plt.plot(xs, ys, <span style="color: #8b2252;">"r."</span>)
<span class="linenr">31: </span><span style="background-color: #f2f2f2;"> </span>   plt.savefig(<span style="color: #8b2252;">"doc/fizzbuzz-plot.png"</span>)
<span class="linenr">32: </span>
<span class="linenr">33: </span><span style="color: #a020f0;">if</span> <span style="color: #483d8b;">__name__</span> == <span style="color: #8b2252;">"__main__"</span>:
<span class="linenr">34: </span><span style="background-color: #f2f2f2;"> </span>   main()
</pre>
</div>

<p>
Das Ergebnis könnte wie folgt aussehen.
</p>

<p>
<img src="doc/fizzbuzz-plot.png" alt="fizzbuzz-plot.png" />" 
</p>

<p>
Eine ausführliche Beschreibung mit Beispielen findet sich im Artikel
<a href="http://pbpython.com/effective-matplotlib.html">Effectively Using Matplotlib</a>.
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Autor: Marco Bakera</p>
<p class="date">Created: 2017-09-28 Do 09:41</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
